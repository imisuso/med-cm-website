import{i as w,o as l,e as i,y as L,A as U,r as k,c as u,d as m,a as t,f,g,b as r,n as p,l as x,t as d,w as E,v as H,j as N}from"./app-D79H12wH.js";import{r as O,a as q}from"./EyeIcon-DhRyjPMa.js";import{T as D}from"./ToggleSwitch-CTkEKEYz.js";import{t as P}from"./style-BXcp9AX6.js";import{S as W}from"./sweetalert2-z6gKu1nJ.js";function $(s,v){return l(),w("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"})])}function B(s,v){return l(),w("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2"})])}function C(s,v){return l(),w("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})])}const A={class:"bg-linear-to-l from-sky-100 shadow-md border-2 border-gray-200 rounded-lg flex flex-col w-full space-y-1 mt-2"},F={key:0,class:"block sm:hidden px-4 pt-4 relative"},G={class:"py-1","aria-labelledby":"dropdownButton"},J={key:0},K={key:1},Q={class:"flex flex-col sm:flex-row items-center w-full px-2 bg-linear-to-l from-sky-100"},R={class:"flex shrink-0 w-24 items-center justify-center"},X=["src"],Y={class:"flex flex-col w-full px-2 items-center sm:items-start"},Z={key:0,class:"text-md text-indigo-500 font-bold mb-1"},ee={key:1,class:"text-md text-indigo-500 font-bold mb-1"},te={class:"text-sm text-gray-500"},se={class:"text-sm text-gray-500"},oe={class:"text-sm text-gray-500"},ne={class:"flex flex-row sm:flex-col w-full justify-center items-baseline px-1 sm:px-2 py-1 sm:py-0"},ie={class:"text-sm text-gray-500 place-self-center"},le={key:0,class:"flex flex-row sm:flex-col w-full sm:w-24 justify-center items-baseline px-1 sm:px-2 py-1 sm:py-0"},re={class:"text-sm text-gray-500 place-self-center"},ae={key:1,class:"flex flex-row sm:flex-col w-full justify-center items-baseline px-1 sm:px-2 py-1 sm:py-0"},de={class:"text-sm text-gray-500 place-self-center"},ue={class:"flex flex-row items-baseline"},pe={key:2,class:"hidden sm:block"},ce={class:"px-4 pt-4 relative"},me={class:"py-1","aria-labelledby":"dropdownButton"},fe={key:0},ge={key:1},be={__name:"PersonInteractiveCardList",props:{personDetails:{type:Object,required:!0},orderInput:{type:Boolean,required:!0}},emits:["view-person","edit-person","delete-person","order-person"],setup(s,{emit:v}){const a=s,_=v;L(()=>{window.addEventListener("click",h)}),U(()=>{window.removeEventListener("click",h)}),k(base_url);const c=k(!1),h=o=>{o.target.matches(".dropbtn")||c.value&&(c.value=!1)},y=(o,e,n)=>{P({title:e,description:n},{showIcon:!0,transition:"zoom",position:"top-right",type:o,timeout:3e3})},M=o=>{N.patch(route("admin.person.update_display_status",o.id),{fdivision:a.personDetails.division_id},{onSuccess:()=>{o.status=!o.status,y("success","สำเร็จ","เปลี่ยนสถานะการแสดงผลบนหน้า website เรียบร้อย")},onError:e=>{let n="";for(let S in e)n=n+`- ${e[S]}<br/>`;y("danger","พบข้อผิดพลาด",n)},onFinish:()=>{}})},z=()=>{W.fire({title:"ต้องการเปลี่ยนการแสดงผลบุคลากร?",html:`<div class="mt-1 font-semibold">${a.personDetails.title_th}${a.personDetails.fname_th} ${a.personDetails.lname_th}</div>  <div class="mt-1">จาก <b>${b(a.personDetails.status)}</b> เป็น <b>${b(!a.personDetails.status)}</b></div>`,imageUrl:a.personDetails.image_url,imageWidth:80,imageHeight:80,showCancelButton:!0,confirmButtonColor:"#1e40af",cancelButtonColor:"#6b7280",confirmButtonText:"ตกลง",cancelButtonText:"ยกเลิก"}).then(o=>{o.isConfirmed&&M(a.personDetails)})},j=()=>{_("order-person")},I=o=>o.type==="a"||o.type==="b"||o.type==="z"&&o.group===1,T=()=>a.personDetails.profiles.leader?"(หัวหน้าหน่วย/สาขา)":"",V=()=>a.personDetails.type==="a"?"(อาจารย์)":a.personDetails.type==="z"?"(ที่ปรึกษา)":a.personDetails.type==="b"?"(แพทย์)":"(เจ้าหน้าที่)",b=o=>o?"เปิด":"ปิด";return(o,e)=>(l(),u("div",A,[s.orderInput?m("",!0):(l(),u("div",F,[t("button",{id:"dropdownButton",onClick:e[0]||(e[0]=n=>c.value=!c.value),class:"block dropbtn text-gray-500 hover:bg-gray-100 focus:outline-hidden focus:ring-4 focus:ring-gray-200 rounded-lg text-sm p-1.5"},e[9]||(e[9]=[t("svg",{class:"w-6 h-6 dropbtn",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[t("path",{class:"dropbtn",d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})],-1)])),t("div",{id:"dropdown",class:p([[c.value?"":"hidden"],"absolute dropdown-content left-0 bg-white text-base z-10 list-none divide-y divide-gray-100 rounded-sm shadow-sm w-48"])},[t("ul",G,[s.personDetails.versions.length&&o.$page.props.auth.abilities.includes("view_all_content")?(l(),u("li",J,[i(r(x),{href:o.route("admin.person.show_backup_history",s.personDetails.id),class:"flex items-center text-sm hover:bg-gray-100 text-green-700 px-4 py-2"},{default:f(()=>[i(r($),{class:p(["w-6 h-6 px-1"])}),e[10]||(e[10]=g(" ประวัติการแก้ไข ",-1))]),_:1,__:[10]},8,["href"])])):m("",!0),t("li",null,[i(r(x),{href:"#",onClick:e[1]||(e[1]=n=>o.$emit("view-person")),class:"flex items-center text-sm hover:bg-gray-100 text-blue-900 px-4 py-2"},{default:f(()=>[i(r(B),{class:p(["w-6 h-6 px-1"])}),e[11]||(e[11]=g(" ดูข้อมูล ",-1))]),_:1,__:[11]})]),o.$page.props.auth.abilities.includes("manage_person")?(l(),u("li",K,[i(r(x),{href:"#",onClick:e[2]||(e[2]=n=>o.$emit("edit-person")),class:"flex items-center text-sm hover:bg-gray-100 text-yellow-500 px-4 py-2"},{default:f(()=>[i(r(C),{class:p(["w-6 h-6 px-1"])}),e[12]||(e[12]=g(" แก้ไข ",-1))]),_:1,__:[12]})])):m("",!0)])],2)])),t("div",Q,[t("div",R,[t("img",{class:"shadow-lg rounded-md h-24 w-16 object-cover mb-1 mt-1",src:`${s.personDetails.image_url}`,alt:"Blank-Image"},null,8,X)]),t("div",Y,[t("span",null,[I(s.personDetails)?(l(),u("h3",ee,[t("div",null,d(s.personDetails.rname_short_th)+" "+d(s.personDetails.fname_th)+" "+d(s.personDetails.lname_th)+" "+d(s.personDetails.reward),1)])):(l(),u("h3",Z,[t("div",null,d(s.personDetails.title_th)+d(s.personDetails.fname_th)+" "+d(s.personDetails.lname_th),1)]))]),t("span",te,d(T()),1),t("span",se,d(V()),1),t("span",oe,"ลำดับการแสดงผล "+d(s.personDetails.display_order),1)]),t("div",ne,[e[13]||(e[13]=t("div",{class:"px-1 place-self-center"},"สาขา/หน่วย:",-1)),t("div",ie,d(s.personDetails.division.division_type)+d(s.personDetails.division.name_th),1)]),s.orderInput?(l(),u("div",le,[e[14]||(e[14]=t("div",{class:"px-1 place-self-center"},"จัดลำดับ:",-1)),t("div",re,[E(t("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=n=>s.personDetails.display_order=n),onChange:j,id:"order_text",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 w-24 block shadow-xs sm:text-sm border-gray-300 rounded-md"},null,544),[[H,s.personDetails.display_order]])])])):m("",!0),s.orderInput?m("",!0):(l(),u("div",ae,[e[15]||(e[15]=t("div",{class:"px-1 place-self-center"},"การแสดงผล:",-1)),t("div",de,[t("div",ue,[i(r(O),{class:p(["w-6 h-6 px-1 text-blue-600"])}),o.$page.props.auth.abilities.includes("view_all_content")?(l(),w(D,{key:0,status:s.personDetails.status,"onUpdate:status":e[4]||(e[4]=n=>s.personDetails.status=n),onButtonIsToggle:z},null,8,["status"])):(l(),w(D,{key:1,status:s.personDetails.status,"onUpdate:status":e[5]||(e[5]=n=>s.personDetails.status=n)},null,8,["status"])),i(r(q),{class:p(["w-6 h-6 px-1 text-blue-600"])})])])])),s.orderInput?m("",!0):(l(),u("div",pe,[t("div",ce,[t("button",{id:"dropdownButton",onClick:e[6]||(e[6]=n=>c.value=!c.value),class:"block dropbtn text-gray-500 hover:bg-gray-100 focus:outline-hidden focus:ring-4 focus:ring-gray-200 rounded-lg text-sm p-1.5"},e[16]||(e[16]=[t("svg",{class:"w-6 h-6 dropbtn",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[t("path",{class:"dropbtn",d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})],-1)])),t("div",{id:"dropdown",class:p([[c.value?"":"hidden",o.$page.props.auth.abilities.includes("manage_person")?"-top-28":"-top-10"],"absolute dropdown-content -left-28 bg-white text-base z-10 list-none divide-y divide-gray-100 rounded-sm shadow-sm w-48"])},[t("ul",me,[s.personDetails.versions.length&&o.$page.props.auth.abilities.includes("view_all_content")&&o.$page.props.auth.abilities.includes("view_log")?(l(),u("li",fe,[i(r(x),{href:o.route("admin.person.show_backup_history",s.personDetails.id),class:"flex items-center text-sm hover:bg-gray-100 text-green-700 px-4 py-2"},{default:f(()=>[i(r($),{class:p(["w-6 h-6 px-1"])}),e[17]||(e[17]=g(" ประวัติการแก้ไข ",-1))]),_:1,__:[17]},8,["href"])])):m("",!0),t("li",null,[i(r(x),{href:"#",onClick:e[7]||(e[7]=n=>o.$emit("view-person")),class:"flex items-center text-sm hover:bg-gray-100 text-blue-900 px-4 py-2"},{default:f(()=>[i(r(B),{class:p(["w-6 h-6 px-1"])}),e[18]||(e[18]=g(" ดูข้อมูล ",-1))]),_:1,__:[18]})]),o.$page.props.auth.abilities.includes("manage_person")?(l(),u("li",ge,[i(r(x),{href:"#",onClick:e[8]||(e[8]=n=>o.$emit("edit-person")),class:"flex items-center text-sm hover:bg-gray-100 text-yellow-500 px-4 py-2"},{default:f(()=>[i(r(C),{class:p(["w-6 h-6 px-1"])}),e[19]||(e[19]=g(" แก้ไข ",-1))]),_:1,__:[19]})])):m("",!0)])],2)])]))])]))}};export{be as _};
