import{r as y,T as R,A as V,c as i,a as t,t as d,d as c,e as w,u as l,w as k,v as $,n as u,b as m,D as A,F as C,f as F,_ as L,o as n,g as v,i as S}from"./app-D_J6jNxv.js";import{s as D}from"./vue-multiselect.css_vue_type_style_index_0_src_true_lang-BuZPANHU.js";import{t as N}from"./style-Cced5V6y.js";import{r as z}from"./FastForwardIcon-CjrnX90p.js";import{r as B}from"./ReplyIcon-DlUJuEWr.js";const E={class:"flex flex-col p-4 w-full"},T={class:"flex flex-col sm:flex-row sm:justify-between px-2 py-2 space-y-2 mb-2 w-full border rounded-md shadow-md items-baseline"},U={class:"text-2xl font-bold"},I={class:"flex items-center px-3 py-1 text-sm font-bold text-gray-100 transition-colors duration-200 transform bg-green-900 rounded cursor-pointer hover:bg-green-800"},O={class:"flex flex-col border rounded-lg shadow-lg p-4"},q={class:"grid grid-cols-6 gap-2 md:gap-6 mt-6 mb-6"},M={class:"col-span-6 md:col-span-5"},W={key:0,class:"mt-2 text-xs text-red-600"},G={class:"col-span-6 md:col-span-5"},H={key:0,class:"mt-2 text-xs text-red-600"},J={class:"grid grid-cols-6 gap-2 md:gap-6 mt-2 mb-6 p-2 rounded-lg"},K={key:0,class:"col-start-1 sm:col-start-2 col-span-6 text-xs text-red-600"},P={class:"bg-gradient-to-r from-blue-100 via-yellow-100 to-pink-100 px-2 py-1 rounded-lg font-normal text-sm tracking-wide text-gray-800 shadow-lg"},Q={class:"flex flex-col sm:flex-row sm:items-center"},X={class:"border-green-700 text-white bg-green-600 px-1 pb-1 rounded-md mr-1"},Y={class:"flex items-start sm:items-center"},Z={class:"flex flex-row mt-2 space-x-4"},ee=["disabled"],se=["disabled"],te={layout:L},ne=Object.assign(te,{__name:"DataForm",props:{action:{type:String,require:!0,default:"insert"},abilities:{type:Array,default:[]},role:{type:Object,default:{}}},setup(p){const a=p,b=y(null);switch(y(base_url),a.action){case"insert":b.value="เพิ่ม";break;case"edit":b.value="แก้ไข";break;case"delete":b.value="ลบ";break}const o=R({role_id:a.role?a.role.id:null,role_name:a.role?a.role.name:null,role_label:a.role?a.role.label:null,abilities:a.role?a.role.abilities:[]}),f=o.abilities?y(o.abilities):y([]),g=(s,e,r)=>{N({title:e,description:r},{showIcon:!0,transition:"zoom",position:"top-right",type:s,timeout:3e3})},j=({name:s,label:e})=>`${s}`,h=()=>{o.abilities=f},x=V(()=>o.role_name&&o.role_label&&o.abilities),_=()=>{let s="";a.action==="edit"?o.patch(route("admin.role.update",o.role_id),{preserveState:!0,preserveScroll:!0,onSuccess:()=>{g("success","สำเร็จ","แก้ไขข้อมูล Role เรียบร้อย")},onError:e=>{for(let r in e)s=s+`- ${e[r]}<br/>`;g("danger","พบข้อผิดพลาด",s)},onFinish:()=>{o.processing=!1}}):o.post(route("admin.role.store"),{preserveState:!0,preserveScroll:!0,onSuccess:()=>{g("success","สำเร็จ","เพิ่มข้อมูล Role เรียบร้อย")},onError:e=>{for(let r in e)s=s+`- ${e[r]}<br/>`;g("danger","พบข้อผิดพลาด",s)},onFinish:()=>{o.processing=!1}})};return(s,e)=>(n(),i("div",E,[t("div",T,[t("div",U,d(b.value)+" Role",1),c(l(S),{href:s.route("admin.role.index"),method:"get",as:"button",type:"button"},{default:w(()=>[t("button",I,[c(l(B),{class:u(["h-6 w-6 mr-2"])}),e[3]||(e[3]=v(" กลับหน้าจัดการ Role "))])]),_:1},8,["href"])]),t("div",O,[t("div",q,[e[4]||(e[4]=t("label",{for:"role-name",class:"col-span-6 md:col-span-1 mr-2 self-start justify-self-start sm:justify-self-end font-semibold"},"ชื่อ Role :",-1)),t("div",M,[t("div",null,[k(t("input",{type:"text",id:"role-name","onUpdate:modelValue":e[0]||(e[0]=r=>l(o).role_name=r),class:u(["focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm rounded-md",[s.$page.props.errors.role_name?"border-red-600":"border-gray-300"]])},null,2),[[$,l(o).role_name]])]),s.$page.props.errors.role_name?(n(),i("div",W,d(s.$page.props.errors.role_name),1)):m("",!0)]),e[5]||(e[5]=t("label",{for:"role-label",class:"col-span-6 md:col-span-1 mr-2 self-start justify-self-start sm:justify-self-end font-semibold"},"รายละเอียด :",-1)),t("div",G,[t("div",null,[k(t("textarea",{id:"role-label","onUpdate:modelValue":e[1]||(e[1]=r=>l(o).role_label=r),class:u(["focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm rounded-md",[s.$page.props.errors.role_label?"border-red-600":"border-gray-300"]])},null,2),[[$,l(o).role_label]])]),s.$page.props.errors.role_label?(n(),i("div",H,d(s.$page.props.errors.role_label),1)):m("",!0)])]),t("div",J,[e[6]||(e[6]=t("label",{for:"abilities",class:"col-span-6 md:col-span-1 mr-2 self-center justify-self-start sm:justify-self-end font-semibold"},"Ability :",-1)),c(l(D),{class:u(["col-span-6 md:col-span-5 mt-4 border",[s.$page.props.errors.abilities?"border-red-600":""]]),id:"abilities",modelValue:l(f),"onUpdate:modelValue":e[2]||(e[2]=r=>A(f)?f.value=r:null),"track-by":"id","show-labels":!0,"custom-label":j,"close-on-select":!1,"clear-on-select":!1,options:p.abilities,multiple:!0,searchable:!1,"allow-empty":!1,selectLabel:"กรุณาเลือก",selectedLabel:"เลือกแล้ว",deselectLabel:"เลือกเพื่อนำออก","preselect-first":!0,"hide-selected":!0,onSelect:h,onRemove:h},null,8,["class","modelValue","options"]),s.$page.props.errors.abilities?(n(),i("div",K,d(s.$page.props.errors.abilities),1)):m("",!0)]),t("div",P,[e[7]||(e[7]=t("div",{class:"font-semibold text-lg underline tracking-wide"},"ภาพรวม :",-1)),(n(!0),i(C,null,F(l(o).abilities,r=>(n(),i("div",{class:"flex items-center py-1",key:r.id},[t("div",Q,[t("div",X,d(r.name),1),t("div",Y,[c(l(z),{class:u(["mr-1 text-green-700 w-6 h-6 shrink-0"])}),v(" "+d(r.label),1)])])]))),128))])]),t("div",Z,[p.action==="insert"?(n(),i("button",{key:0,disabled:!x.value,type:"button",onClick:_,class:u(["font-medium rounded-lg text-sm px-5 py-2.5 text-center",[x.value?"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300":"text-gray-500 bg-white focus:ring-4 focus:ring-gray-300 border border-gray-200"]])}," จัดเก็บ ",10,ee)):m("",!0),p.action==="edit"?(n(),i("button",{key:1,disabled:!x.value,type:"button",onClick:_,class:"text-white bg-orange-700 hover:bg-orange-800 focus:ring-4 focus:ring-orange-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center"},"แก้ไข",8,se)):m("",!0),c(l(S),{href:s.route("admin.role.index"),method:"get",as:"button",type:"button",class:"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:ring-gray-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10"},{default:w(()=>e[8]||(e[8]=[v(" ยกเลิก ")])),_:1},8,["href"])])]))}});export{ne as default};
