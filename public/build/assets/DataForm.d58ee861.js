import{r as d,J as T,O as B,o as m,b as p,d as e,t as n,a as i,q as f,u as l,n as b,p as y,C as x,i as w,g as S,a7 as O}from"./app.cd53f048.js";import{T as R}from"./ToggleSwitch.faef6303.js";import{l as z,s as k}from"./lodash.a7513e38.js";import{t as A}from"./style.4a4ce3fe.js";import{r as E}from"./ReplyIcon.7410f862.js";import{r as F,a as L}from"./EyeIcon.c6e2e713.js";const q={class:"flex flex-col p-4 w-full"},D={class:"flex flex-col sm:flex-row sm:justify-between px-2 py-2 space-y-2 mb-2 w-full border rounded-md shadow-md items-baseline"},I={class:"text-2xl font-bold"},P={class:"flex items-center px-3 py-1 text-sm font-bold text-gray-100 transition-colors duration-200 transform bg-green-900 rounded cursor-pointer hover:bg-green-800"},J={class:"flex flex-col border rounded-lg shadow-lg p-4"},M={class:"flex justify-center md:justify-start"},W=["src"],G=["src"],H={class:"grid grid-cols-6 gap-2 md:gap-6 mt-6 mb-6"},K=e("label",{for:"user_id",class:"col-span-6 md:col-span-1 mr-2 self-end"},"\u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19 :",-1),Q={class:"flex items-center"},X=["src"],Y=e("label",{for:"role_name",class:"col-span-6 md:col-span-1 mr-2 self-end"},"\u0E2B\u0E19\u0E49\u0E32\u0E17\u0E35\u0E48 :",-1),Z={"slot:singleLabel":"props"},ee={"slot:option":"props"},se=e("label",{for:"status",class:"col-span-2 md:col-span-1 mr-2 self-center"},"\u0E2A\u0E16\u0E32\u0E19\u0E30 :",-1),te={class:"col-span-4"},oe={id:"status",class:"flex items-center my-2 sm:my-0"},le={class:"text-blue-600"},ae={class:"text-blue-600"},re={class:"flex flex-row mt-2 space-x-4"},ne={layout:O},fe=Object.assign(ne,{__name:"DataForm",props:{action:{type:String,require:!0,default:"insert"},user:{type:Object},person:{type:Array,default:[]},roles:{type:Array,default:[]}},setup(c){const o=c,g=d(null),C=d(base_url);switch(o.action){case"insert":g.value="\u0E40\u0E1E\u0E34\u0E48\u0E21";break;case"edit":g.value="\u0E41\u0E01\u0E49\u0E44\u0E02";break;case"delete":g.value="\u0E25\u0E1A";break}const r=T({user_id:o.user?o.user.id:null,role_name:o.user&&o.user.roles.length?o.user.roles[0].name:null,status:o.user?o.user.status:!0}),u=o.user?o.person[0]:d(null),_=o.user&&o.user.roles.length?d(o.user.roles[0]):d(null),h=(s,a,t)=>{A({title:a,description:t},{showIcon:!0,transition:"zoom",position:"top-right",type:s,timeout:3e3})},V=({name:s})=>`${s}`,j=z.exports.throttle(s=>{B.get(route("admin.user.create"),{term:s},{preserveState:!0,preserveScroll:!0,replace:!0})},300),N=s=>{r.user_id=s.id},U=s=>{r.role_name=s.name},$=()=>{r.status=!r.status},v=()=>{let s="";o.action==="edit"?r.patch(route("admin.user.update",r.user_id),{preserveState:!1,preserveScroll:!0,onSuccess:()=>{h("success","\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08","\u0E41\u0E01\u0E49\u0E44\u0E02\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19\u0E40\u0E23\u0E35\u0E22\u0E1A\u0E23\u0E49\u0E2D\u0E22")},onError:a=>{for(let t in a)s=s+`- ${a[t]}<br/>`;h("danger","\u0E1E\u0E1A\u0E02\u0E49\u0E2D\u0E1C\u0E34\u0E14\u0E1E\u0E25\u0E32\u0E14",s)},onFinish:()=>{r.processing=!1}}):r.post(route("admin.user.store",r.user_id),{preserveState:!1,preserveScroll:!0,onSuccess:()=>{h("success","\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08","\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19\u0E40\u0E23\u0E35\u0E22\u0E1A\u0E23\u0E49\u0E2D\u0E22")},onError:a=>{for(let t in a)s=s+`- ${a[t]}<br/>`;h("danger","\u0E1E\u0E1A\u0E02\u0E49\u0E2D\u0E1C\u0E34\u0E14\u0E1E\u0E25\u0E32\u0E14",s)},onFinish:()=>{r.processing=!1}})};return(s,a)=>(m(),p("div",q,[e("div",D,[e("div",I,n(g.value)+"\u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19",1),i(l(x),{href:s.route("admin.user.index"),method:"get",as:"button",type:"button"},{default:f(()=>[e("button",P,[i(l(E),{class:b(["h-6 w-6 mr-2"])}),y(" \u0E01\u0E25\u0E31\u0E1A\u0E2B\u0E19\u0E49\u0E32\u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19 ")])]),_:1},8,["href"])]),e("div",J,[e("div",M,[l(u)?(m(),p("img",{key:1,src:l(u).image_url,alt:"No Picture",class:"object-cover w-20 h-28 rounded-lg ring-1 ring-gray-300"},null,8,G)):(m(),p("img",{key:0,src:`${C.value}/fallbackimage/default-blank-image.jpg`,alt:"No Picture",class:"object-cover w-20 h-28 rounded-lg ring-1 ring-gray-300"},null,8,W))]),e("div",H,[K,i(l(k),{id:"user_id",modelValue:l(u),"onUpdate:modelValue":a[0]||(a[0]=t=>w(u)?u.value=t:null),"deselect-label":"Can't remove this value","track-by":"id",label:"lname_th",internalSearch:!1,placeholder:"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19",class:"col-span-6 md:col-span-5",disabled:!!c.user,"show-labels":!1,options:c.person,searchable:!c.user,"allow-empty":!1,onSearchChange:l(j),onSelect:N},{singleLabel:f(t=>[e("span",null,[e("strong",null,n(t.option.fname_th)+" - "+n(t.option.lname_th)+" ["+n(t.option.division.name_th)+"]",1)])]),option:f(t=>[e("div",Q,[e("img",{class:"h-14 w-12 p-1",src:t.option.image_url,alt:"Not Available"},null,8,X),e("strong",null,n(t.option.fname_th)+" - "+n(t.option.lname_th)+" ["+n(t.option.division.name_th)+"]",1)])]),_:1},8,["modelValue","disabled","options","searchable","onSearchChange"]),Y,i(l(k),{id:"role_name",modelValue:l(_),"onUpdate:modelValue":a[1]||(a[1]=t=>w(_)?_.value=t:null),"deselect-label":"Can't remove this value","track-by":"name",label:"name",placeholder:"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E2B\u0E19\u0E49\u0E32\u0E17\u0E35\u0E48\u0E23\u0E31\u0E1A\u0E1C\u0E34\u0E14\u0E0A\u0E2D\u0E1A",class:"col-span-6 md:col-span-5","custom-label":V,"show-labels":!1,options:c.roles,searchable:!1,"allow-empty":!1,onSelect:U},{default:f(()=>[e("template",Z,[e("span",null,n(o.option.name),1)]),e("template",ee,[e("span",null,[e("strong",null,n(o.option.name),1)])])]),_:1},8,["modelValue","options"]),se,e("div",te,[e("div",oe,[e("div",le,[i(l(F),{class:b(["h-4 w-4"])})]),i(R,{status:l(r).status,onButtonIsToggle:$},null,8,["status"]),e("div",ae,[i(l(L),{class:b(["h-4 w-4"])})])])])])]),e("div",re,[c.action==="insert"?(m(),p("button",{key:0,type:"button",onClick:v,class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center"},"\u0E08\u0E31\u0E14\u0E40\u0E01\u0E47\u0E1A")):S("",!0),c.action==="edit"?(m(),p("button",{key:1,type:"button",onClick:v,class:"text-white bg-orange-700 hover:bg-orange-800 focus:ring-4 focus:ring-orange-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center"},"\u0E41\u0E01\u0E49\u0E44\u0E02")):S("",!0),i(l(x),{href:s.route("admin.user.index"),method:"get",as:"button",type:"button",class:"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:ring-gray-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10"},{default:f(()=>[y(" \u0E22\u0E01\u0E40\u0E25\u0E34\u0E01 ")]),_:1},8,["href"])])]))}});export{fe as default};
