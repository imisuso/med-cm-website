import{r as p,I as L,J as O,K as A,z as T,o as d,b as r,d as e,t as f,a as w,q as k,p as h,u as l,C as j,e as $,a8 as J,F as C,f as M,g as D,v as Q,a7 as U,L as R}from"./app.cd53f048.js";import{d as v}from"./th.4465aa07.js";import{t as P}from"./style.4a4ce3fe.js";const K={class:"flex flex-col p-4 w-full"},W={class:"flex flex-col sm:flex-row sm:justify-between px-2 py-2 space-y-2 mb-2 w-full border rounded-md shadow-md items-baseline"},G={class:"text-2xl font-bold"},X=e("div",{class:"text-gray-900 text-lg underline font-medium dark:text-white mb-4"}," \u0E23\u0E32\u0E22\u0E25\u0E30\u0E40\u0E2D\u0E35\u0E22\u0E14\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E02\u0E48\u0E32\u0E27\u0E1B\u0E23\u0E30\u0E01\u0E32\u0E28 ",-1),Z={class:"grid grid-cols-6 gap-2"},ee={class:"mt-5 md:mt-0 col-span-6"},te={class:"shadow overflow-hidden sm:rounded-md"},oe={class:"px-4 py-5 bg-white sm:p-6"},se=["disabled"],ne={class:"grid grid-cols-6 gap-6 mb-6"},ie={class:"col-span-6"},ae=e("label",{for:"topic",class:"block text-sm font-medium text-gray-700 mb-2"},"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E1B\u0E23\u0E30\u0E01\u0E32\u0E28\u0E2B\u0E21\u0E14\u0E2D\u0E32\u0E22\u0E38",-1),le={key:0,class:"col-span-6"},de=e("label",{for:"division_selected",class:"block text-sm font-medium text-gray-700"},"\u0E2A\u0E32\u0E02\u0E32/\u0E2B\u0E19\u0E48\u0E27\u0E22\u0E07\u0E32\u0E19",-1),re=e("option",{value:"0"},"\u0E15\u0E32\u0E21\u0E2A\u0E32\u0E02\u0E32/\u0E2B\u0E19\u0E48\u0E27\u0E22\u0E07\u0E32\u0E19\u0E1C\u0E39\u0E49\u0E1B\u0E23\u0E30\u0E01\u0E32\u0E28",-1),ce=["value"],ue={class:"col-span-6"},me=e("div",{class:"flex items-center justify-between"},[e("label",{for:"topic",class:"block text-sm font-medium text-gray-700"},"\u0E2B\u0E31\u0E27\u0E02\u0E49\u0E2D\u0E02\u0E48\u0E32\u0E27")],-1),_e={key:1,class:"col-span-6"},pe={class:"my-1"},fe={class:"flex items-center flex-col sm:flex-row justify-between border border-indigo-500 rounded-md"},he={class:"flex flex-col"},ge={class:"p-2"},ve=e("strong",null,"\u0E0A\u0E37\u0E48\u0E2D\u0E44\u0E1F\u0E25\u0E4C : ",-1),be={class:"flex items-center m-2 sm:m-0"},xe=["onClick"],ye=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 hover:fill-current",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),we=[ye],ke={class:"col-span-6"},De={class:"my-1"},Fe={class:"flex items-center flex-col sm:flex-row justify-between border border-indigo-500 rounded-md"},Ce={class:"flex flex-col"},Me={class:"p-2"},Ve=e("strong",null,"\u0E0A\u0E37\u0E48\u0E2D\u0E44\u0E1F\u0E25\u0E4C : ",-1),Ye={class:"flex items-center m-2 sm:m-0"},Se=e("span",{class:"p-2 mt-2 text-sm cursor-pointer rounded-lg shadow-lg border text-white border-indigo-500 bg-blue-700 hover:bg-blue-800 hover:text-white"},"\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E44\u0E1F\u0E25\u0E4C",-1),Te=["id","onChange"],je=["onClick"],$e=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 hover:fill-current",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),He=[$e],Ne=e("div",{class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center"}," \u0E40\u0E1E\u0E34\u0E48\u0E21\u0E44\u0E1F\u0E25\u0E4C\u0E41\u0E19\u0E1A ",-1),qe=[Ne],ze={class:""},Be=e("label",{for:"topic",class:"block text-sm font-medium text-gray-700 mt-2 mb-2"},"\u0E40\u0E19\u0E37\u0E49\u0E2D\u0E2B\u0E32\u0E02\u0E48\u0E32\u0E27\u0E1B\u0E23\u0E30\u0E01\u0E32\u0E28",-1),Ie={class:"flex flex-row mt-4 space-x-4"},Ee={layout:U},Je=Object.assign(Ee,{__name:"DataForm",props:{action:{type:String,require:!0,default:"create"},announce:{type:Object},divisions:{type:Array},fdivision_selected:{type:Number}},setup(g){var S;const n=g,b=p(),H=p([["bold","italic","underline","strike"],["blockquote"],[{header:[1,2,3,4,!1]}],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["link"],["clean"]]),x=p(null),N=p(!1),q=["\u0E21\u0E01\u0E23\u0E32\u0E04\u0E21","\u0E01\u0E38\u0E21\u0E20\u0E32\u0E1E\u0E31\u0E19\u0E18\u0E4C","\u0E21\u0E35\u0E19\u0E32\u0E04\u0E21","\u0E40\u0E21\u0E29\u0E32\u0E22\u0E19","\u0E1E\u0E24\u0E29\u0E20\u0E32\u0E04\u0E21","\u0E21\u0E34\u0E16\u0E38\u0E19\u0E32\u0E22\u0E19","\u0E01\u0E23\u0E01\u0E0E\u0E32\u0E04\u0E21","\u0E2A\u0E34\u0E07\u0E2B\u0E32\u0E04\u0E21","\u0E01\u0E31\u0E19\u0E22\u0E32\u0E22\u0E19","\u0E15\u0E38\u0E25\u0E32\u0E04\u0E21","\u0E1E\u0E24\u0E28\u0E08\u0E34\u0E01\u0E32\u0E22\u0E19","\u0E18\u0E31\u0E19\u0E27\u0E32\u0E04\u0E21"],z=p(v().startOf("day").toDate()),u=L([]),i=O({id:n.announce?n.announce.id:null,pinned:n.announce?n.announce.pinned:!1,topic:n.announce?n.announce.topic:null,detail_delta:(S=n.announce)!=null&&S.detail_delta?JSON.parse(n.announce.detail_delta):{},expire_date:n.announce?v(n.announce.expire_date).toDate():p(v(z.value).add(30,"day").toDate()),division_id:n.fdivision_selected?n.fdivision_selected:A().props.auth.division_id,type:n.announce?n.announce.type:1,old_attachments:n.announce?n.announce.attach_files.length>0?n.announce.attach_files:[]:[]});switch(n.action){case"create":x.value="\u0E40\u0E1E\u0E34\u0E48\u0E21";break;case"edit":x.value="\u0E41\u0E01\u0E49\u0E44\u0E02";break;case"view":x.value="\u0E14\u0E39";break}const B=()=>{b.value.getQuill().enable(!0)},V=o=>{const t=o.getDate(),a=o.getMonth(),m=o.getFullYear();return`\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48 ${t} ${q.at(a)} ${m+543}`},I=()=>{u.push({name:"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E44\u0E1F\u0E25\u0E4C",size:0}),R(()=>{var o="file-"+(u.length-1);document.getElementById(o).click()})},y=(o,t)=>{o.splice(t,1)},E=(o,t,a)=>{let m=a.target.files[0];t.File=m,t.name=m.name,t.size=m.size,t.size>1024*1024*5&&(y(u,o),_("warning","\u0E1E\u0E1A\u0E02\u0E49\u0E2D\u0E1C\u0E34\u0E14\u0E1E\u0E25\u0E32\u0E14","\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E44\u0E1F\u0E25\u0E4C\u0E41\u0E19\u0E1A\u0E44\u0E21\u0E48\u0E44\u0E14\u0E49 \u0E40\u0E19\u0E37\u0E48\u0E2D\u0E07\u0E08\u0E32\u0E01\u0E44\u0E1F\u0E25\u0E4C\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13\u0E43\u0E2B\u0E0D\u0E48\u0E40\u0E01\u0E34\u0E19\u0E44\u0E1B (> 5MB)")),m.type.match("application/pdf")||(y(u,o),_("warning","\u0E1E\u0E1A\u0E02\u0E49\u0E2D\u0E1C\u0E34\u0E14\u0E1E\u0E25\u0E32\u0E14","\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E44\u0E1F\u0E25\u0E4C\u0E41\u0E19\u0E1A\u0E44\u0E21\u0E48\u0E44\u0E14\u0E49 \u0E40\u0E19\u0E37\u0E48\u0E2D\u0E07\u0E08\u0E32\u0E01\u0E2D\u0E19\u0E38\u0E0D\u0E32\u0E15\u0E43\u0E2B\u0E49\u0E41\u0E19\u0E1A\u0E44\u0E1F\u0E25\u0E4C\u0E40\u0E09\u0E1E\u0E32\u0E30 PDF \u0E40\u0E17\u0E48\u0E32\u0E19\u0E31\u0E49\u0E19"))},Y=()=>{let o="";i.id?i.transform(t=>({...t,expire_date:v(t.expire_date).format("YYYY-MM-DD HH:mm:ss"),detail_delta:JSON.stringify(t.detail_delta),detail_html:b.value.getHTML(),atFiles:u.map(a=>a.File)})).post(route("admin.announce.update",i.id),{_method:"patch",preserveState:!1,onSuccess:()=>{_("success","\u0E41\u0E01\u0E49\u0E44\u0E02\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08","\u0E41\u0E01\u0E49\u0E44\u0E02\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E1B\u0E23\u0E30\u0E01\u0E32\u0E28 \u0E40\u0E23\u0E35\u0E22\u0E1A\u0E23\u0E49\u0E2D\u0E22")},onError:t=>{for(let a in t)o=o+`- ${t[a]}<br/>`;_("danger","\u0E1E\u0E1A\u0E02\u0E49\u0E2D\u0E1C\u0E34\u0E14\u0E1E\u0E25\u0E32\u0E14",o)},onFinish:()=>{i.processing=!1}}):i.transform(t=>({...t,expire_date:v(t.expire_date).format("YYYY-MM-DD HH:mm:ss"),detail_delta:JSON.stringify(t.detail_delta),detail_html:b.value.getHTML(),atFiles:u.map(a=>a.File)})).post(route("admin.announce.store"),{preserveState:!1,onSuccess:()=>{_("success","\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08","\u0E08\u0E31\u0E14\u0E40\u0E01\u0E47\u0E1A\u0E1B\u0E23\u0E30\u0E01\u0E32\u0E28\u0E40\u0E23\u0E35\u0E22\u0E1A\u0E23\u0E49\u0E2D\u0E22")},onError:t=>{for(let a in t)o=o+`- ${t[a]}<br/>`;_("danger","\u0E1E\u0E1A\u0E02\u0E49\u0E2D\u0E1C\u0E34\u0E14\u0E1E\u0E25\u0E32\u0E14",o)},onFinish:()=>{i.processing=!1}}),u.splice(0)},_=(o,t,a)=>{P({title:t,description:a},{showIcon:!0,transition:"zoom",position:"top-right",type:o,timeout:3e3})};return(o,t)=>{const a=T("Datepicker"),m=T("QuillEditor");return d(),r("div",K,[e("div",W,[e("div",G,f(x.value)+"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E02\u0E48\u0E32\u0E27\u0E1B\u0E23\u0E30\u0E01\u0E32\u0E28",1),w(l(j),{href:o.route("admin.announce"),data:{fdivision_selected:g.fdivision_selected},method:"get",as:"button",type:"button",class:"px-3 py-1 text-sm font-bold text-gray-100 transition-colors duration-200 transform bg-green-900 rounded cursor-pointer hover:bg-green-800"},{default:k(()=>[h(" \u0E01\u0E25\u0E31\u0E1A\u0E2B\u0E19\u0E49\u0E32\u0E2B\u0E25\u0E31\u0E01 ")]),_:1},8,["href","data"])]),X,e("div",Z,[e("div",ee,[e("div",te,[e("div",oe,[e("fieldset",{disabled:N.value},[e("div",ne,[e("div",ie,[ae,w(a,{"menu-class-name":"shadow-lg shadow-stone-800/50",placeholder:"default 30 \u0E27\u0E31\u0E19",modelValue:l(i).expire_date,"onUpdate:modelValue":t[0]||(t[0]=s=>l(i).expire_date=s),locale:"th",cancelText:"\u0E22\u0E01\u0E40\u0E25\u0E34\u0E01",selectText:"\u0E40\u0E25\u0E37\u0E2D\u0E01",yearRange:[new Date().getFullYear()-2,new Date().getFullYear()+5],enableTimePicker:!1,format:V,previewFormat:V,minDate:new Date,clearable:!1,autoApply:""},{year:k(({year:s})=>[h(f(parseInt(s)+543),1)]),"year-overlay-value":k(({text:s,value:c})=>[h(f(parseInt(s)+543),1)]),_:1},8,["modelValue","yearRange","minDate"])]),o.$page.props.auth.abilities.includes("view_all_content")?(d(),r("div",le,[de,$(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>l(i).division_id=s),id:"division_selected",class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},[re,(d(!0),r(C,null,M(g.divisions,(s,c)=>(d(),r("option",{key:c,value:s.division_id},f(s.name_th),9,ce))),128))],512),[[J,l(i).division_id]])])):D("",!0),e("div",ue,[me,$(e("input",{type:"text",id:"topic","onUpdate:modelValue":t[2]||(t[2]=s=>l(i).topic=s),class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Q,l(i).topic,void 0,{trim:!0}]])]),l(i).old_attachments?(d(),r("div",_e,[e("ul",null,[(d(!0),r(C,null,M(l(i).old_attachments,(s,c)=>(d(),r("li",{key:c},[e("div",pe,[e("div",fe,[e("div",he,[e("div",ge,[ve,h(f(s.orig_name),1)])]),e("div",be,[e("a",{href:"#",onClick:F=>y(l(i).old_attachments,c),class:"flex items-center text-sm text-red-600 px-2 py-2"},we,8,xe)])])])]))),128))])])):D("",!0),e("div",ke,[e("ul",null,[(d(!0),r(C,null,M(u,(s,c)=>(d(),r("li",{key:c},[e("div",De,[e("div",Fe,[e("div",Ce,[e("div",Me,[Ve,h(f(s.name),1)])]),e("div",Ye,[e("label",null,[Se,e("input",{id:"file-"+c,type:"file",accept:".pdf",onChange:F=>E(c,s,F),style:{display:"none"}},null,40,Te)]),e("a",{href:"#",onClick:F=>y(u,c),class:"flex items-center text-sm text-red-600 px-2 py-2"},He,8,je)])])])]))),128))]),e("a",{href:"#",onClick:I,class:"add"},qe)])])],8,se)])])])]),e("div",ze,[Be,w(m,{id:"quill_e",ref_key:"quill_e",ref:b,theme:"snow",content:l(i).detail_delta,"onUpdate:content":t[3]||(t[3]=s=>l(i).detail_delta=s),contentType:"delta",toolbar:H.value,onReady:B},null,8,["content","toolbar"])]),e("div",Ie,[g.action==="create"?(d(),r("button",{key:0,type:"button",onClick:Y,class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center"},"\u0E08\u0E31\u0E14\u0E40\u0E01\u0E47\u0E1A")):D("",!0),g.action==="edit"?(d(),r("button",{key:1,type:"button",onClick:Y,class:"text-white bg-orange-700 hover:bg-orange-800 focus:ring-4 focus:ring-orange-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center"},"\u0E41\u0E01\u0E49\u0E44\u0E02")):D("",!0),w(l(j),{href:o.route("admin.announce"),data:{fdivision_selected:l(i).division_id},method:"get",as:"button",type:"button",class:"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:ring-gray-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10"},{default:k(()=>[h(" \u0E22\u0E01\u0E40\u0E25\u0E34\u0E01 ")]),_:1},8,["href","data"])])])}}});export{Je as default};
