import{y as z,A as O,r as g,c,o as a,a as t,i as b,n as y,g as k,t as w,b as p,e as v,f as m,T as _,F as h,j as $,_ as V,D as T,u as E,d as L,w as P,v as A,E as F,l as H,h as S}from"./app-BzHu68Tx.js";import{_ as D}from"./Modal-DtCuDKZn.js";import{T as I}from"./ToggleSwitch-Cc97zONt.js";import{d as M}from"./th-Dgmx0C5v.js";import{b as N}from"./buddhistEra-BTxRmItM.js";import{t as j}from"./style-CtG-h1JG.js";import{_ as U}from"./Paginations-x-ame6AY.js";const q={class:"bg-linear-to-l from-sky-100 shadow-md border-2 border-gray-200 rounded-lg flex flex-col w-full space-y-1 mt-2"},R={class:"block sm:hidden px-4 pt-4 relative"},W={class:"py-1","aria-labelledby":"dropdownButton"},G={class:"flex flex-col sm:flex-row items-center w-full px-2 bg-linear-to-l from-sky-100"},J={class:"flex shrink-0 w-24 items-center justify-center"},K={key:0,class:"shadow-lg rounded-md h-16 w-16 mb-1 mt-1 text-gray-300",fill:"currentColor",viewBox:"0 0 24 24"},Q=["src","alt"],X={class:"flex flex-col w-full px-2 items-center sm:items-start"},Y={class:"text-sm text-gray-500 break-words"},Z={class:"flex flex-row sm:flex-col w-full justify-center items-baseline px-1 sm:px-2 py-1 sm:py-0"},tt={class:"text-sm text-gray-500 place-self-center"},et=["href"],st={class:"flex flex-row sm:flex-col w-full justify-center items-baseline px-1 sm:px-2 py-1 sm:py-0"},ot={class:"text-sm text-gray-500 place-self-center"},rt={class:"flex flex-row sm:flex-col w-full justify-center items-baseline px-1 sm:px-2 py-1 sm:py-0"},lt={class:"text-sm text-gray-500 place-self-center"},nt={class:"flex flex-row items-baseline"},it={class:"hidden sm:block"},dt={class:"px-4 pt-4 relative"},at={class:"py-1","aria-labelledby":"dropdownButton"},ut={key:0,class:"text-gray-900 text-xl font-medium dark:text-white"},ct={key:1,class:"text-gray-900 text-xl font-medium dark:text-white"},mt={class:"flex flex-row justify-start items-center"},ft=["src"],xt={class:"text-gray-900 text-md font-medium dark:text-white truncate"},pt={__name:"PosterInteractiveCardList",props:{posterDetails:{type:Object,required:!0,default:{}}},emits:["delete-poster"],setup(r,{emit:B}){z(()=>{window.addEventListener("click",n)}),O(()=>{window.removeEventListener("click",n)}),M.extend(N),g(base_url);const l=g(!1),u=g(!1),n=i=>{i.target.matches(".dropbtn")||l.value&&(l.value=!1)},f=(i,e,s)=>{j({title:e,description:s},{showIcon:!0,transition:"zoom",position:"top-right",type:i,timeout:3e3})},x=i=>{$.patch(route("admin.poster.update_display_status",i.id),{},{onSuccess:()=>{i.status=!i.status,f("success","สำเร็จ","เปลี่ยนสถานะการแสดงผลบนหน้า website เรียบร้อย")},onError:e=>{let s="";for(let o in e)s=s+`- ${e[o]}<br/>`;f("danger","พบข้อผิดพลาด",s)},onFinish:()=>{u.value=!1}})};return(i,e)=>(a(),c(h,null,[t("div",q,[t("div",R,[t("button",{id:"dropdownButton",onClick:e[0]||(e[0]=s=>l.value=!l.value),class:"block dropbtn text-gray-500 hover:bg-gray-100 focus:outline-hidden focus:ring-4 focus:ring-gray-200 rounded-lg text-sm p-1.5"},e[8]||(e[8]=[t("svg",{class:"w-6 h-6 dropbtn",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[t("path",{class:"dropbtn",d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})],-1)])),t("div",{id:"dropdown",class:y([[l.value?"":"hidden"],"absolute dropdown-content left-0 bg-white text-base z-10 list-none divide-y divide-gray-100 rounded-sm shadow-sm w-44"])},[t("ul",W,[t("li",null,[t("a",{href:"#",onClick:e[1]||(e[1]=s=>i.$emit("delete-poster")),class:"flex items-center text-sm hover:bg-gray-100 text-red-600 px-4 py-2"},e[9]||(e[9]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 px-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),k(" ลบ ",-1)]))])])],2)]),t("div",G,[t("div",J,[r.posterDetails.cover?(a(),c("img",{key:1,class:"shadow-lg rounded-md h-20 w-16 mb-1 mt-1",src:`${r.posterDetails.cover_url}`,alt:r.posterDetails.desc},null,8,Q)):(a(),c("svg",K,e[10]||(e[10]=[t("path",{d:"M24 20.993V24H0v-2.996A14.977 14.977 0 0112.004 15c4.904 0 9.26 2.354 11.996 5.993zM16.002 8.999a4 4 0 11-8 0 4 4 0 018 0z"},null,-1)])))]),t("div",X,[e[11]||(e[11]=t("h3",{class:"text-md text-indigo-500 font-bold mb-1"},"รายละเอียด:",-1)),t("span",Y,w(r.posterDetails.desc),1)]),t("div",Z,[e[13]||(e[13]=t("div",{class:"px-1 place-self-center text-md text-indigo-500 font-bold"},"ไฟล์เนื้อหา:",-1)),t("div",tt,[t("a",{href:r.posterDetails.content_url,target:"_blank"},e[12]||(e[12]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 hover:text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})],-1)]),8,et)])]),t("div",st,[e[14]||(e[14]=t("div",{class:"px-1 place-self-center text-md text-indigo-500 font-bold"},"วันจัดเก็บ:",-1)),t("div",ot,w(p(M)(r.posterDetails.created_at).locale("th").format("D/MM/BBBB H:mm")),1)]),t("div",rt,[e[17]||(e[17]=t("div",{class:"px-1 place-self-center text-md text-indigo-500 font-bold"},"การแสดงผล:",-1)),t("div",lt,[t("div",nt,[e[15]||(e[15]=t("div",{class:"text-blue-600"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})])],-1)),v(I,{status:r.posterDetails.status,"onUpdate:status":e[2]||(e[2]=s=>r.posterDetails.status=s),onButtonIsToggle:e[3]||(e[3]=s=>u.value=!u.value)},null,8,["status"]),e[16]||(e[16]=t("div",{class:"text-blue-600"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})])],-1))])])]),t("div",it,[t("div",dt,[t("button",{id:"dropdownButton",onClick:e[4]||(e[4]=s=>l.value=!l.value),class:"block dropbtn text-gray-500 hover:bg-gray-100 focus:outline-hidden focus:ring-4 focus:ring-gray-200 rounded-lg text-sm p-1.5"},e[18]||(e[18]=[t("svg",{class:"w-6 h-6 dropbtn",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[t("path",{class:"dropbtn",d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})],-1)])),t("div",{id:"dropdown",class:y([[l.value?"":"hidden"],"absolute dropdown-content -left-28 bg-white text-base z-10 list-none divide-y divide-gray-100 rounded-sm shadow-sm w-44"])},[t("ul",at,[t("li",null,[t("a",{href:"#",onClick:e[5]||(e[5]=s=>i.$emit("delete-poster")),class:"flex items-center text-sm hover:bg-gray-100 text-red-600 px-4 py-2"},e[19]||(e[19]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 px-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),k(" ลบ ",-1)]))])])],2)])])])]),(a(),b(_,{to:"body"},[v(D,{isModalOpen:u.value},{header:m(()=>[r.posterDetails.status?(a(),c("div",ut,"คุณต้องการ ปิด การแสดงผลโปสเตอร์")):(a(),c("div",ct,"คุณต้องการ เปิด การแสดงผลโปสเตอร์"))]),body:m(()=>[t("div",mt,[t("img",{class:"shadow-lg rounded-md h-20 w-16 mb-1 mt-1 mr-4",src:`${r.posterDetails.cover_url}`,alt:""},null,8,ft),t("div",xt,w(r.posterDetails.desc),1)])]),footer:m(()=>[t("button",{onClick:e[6]||(e[6]=s=>x(r.posterDetails)),type:"button",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-blue-300 focus:ring-4 font-medium rounded-lg text-sm px-5 py-2.5 text-center"}," ตกลง "),t("button",{onClick:e[7]||(e[7]=s=>u.value=!1),type:"button",class:"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:ring-gray-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10"},"ยกเลิก")]),_:1},8,["isModalOpen"])]))],64))}},gt={class:"flex flex-col p-4 w-full"},vt={class:"flex flex-col sm:flex-row sm:justify-between px-2 py-2 space-y-2 mb-2 w-full border border-gray-200 rounded-md shadow-md items-baseline"},wt={class:"flex space-x-2"},bt={key:0,class:"flex flex-col justify-center mt-10 p-2 text-2xl text-white text-center border rounded-md bg-linear-to-r from-violet-500 to-fuchsia-500"},ht={class:"flex flex-col w-full"},yt={class:"flex flex-row justify-start items-center"},kt=["src"],Mt={class:"text-gray-900 text-md font-medium dark:text-white truncate"},_t={class:"flex justify-center md:justify-end mt-2 px-4"},$t={layout:V},Et=Object.assign($t,{__name:"Index",props:{posters:{type:Object,required:!0,default:{}},filters:{type:Object}},setup(r){let l=g(r.filters.search);T(l,s=>{$.get(route("admin.poster"),{search:s},{preserveState:!0,replace:!0})});const u=(s,o,d)=>{j({title:o,description:d},{showIcon:!0,transition:"zoom",position:"top-right",type:s,timeout:3e3})},n=E({id:null,desc:null,cover:null}),f=g(!1),x=s=>{f.value=s,s||n.reset()},i=s=>{n.id=s.id,n.desc=s.desc,n.cover=s.cover_url,x(!0)},e=()=>{n.delete(route("admin.poster.delete",n.id),{onSuccess:()=>{u("success","สำเร็จ","ลบข้อมูลโปสเตอร์เรียบร้อย")},onError:s=>{let o="";for(let d in s)o=o+`- ${s[d]}<br/>`;u("danger","พบข้อผิดพลาด",o)},onFinish:()=>{n.processing=!1}}),x(!1)};return(s,o)=>(a(),c(h,null,[t("div",gt,[t("div",vt,[o[3]||(o[3]=t("div",{class:"text-2xl font-bold"},"จัดการโปสเตอร์",-1)),P(t("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=d=>F(l)?l.value=d:l=d),class:"text rounded-md border-gray-400",placeholder:"ค้นหาจากรายละเอียด"},null,512),[[A,p(l)]])]),t("div",wt,[v(p(H),{href:s.route("admin.poster.create"),method:"get",as:"button",type:"button",class:"flex items-center px-3 py-1 text-sm font-bold text-gray-100 transition-colors duration-200 transform bg-green-900 rounded-sm cursor-pointer hover:bg-green-800"},{default:m(()=>o[4]||(o[4]=[t("div",null,[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})])],-1),t("div",null,"เพิ่ม",-1)])),_:1,__:[4]},8,["href"])]),r.posters.data.length===0?(a(),c("div",bt," ไม่พบข้อมูลโปสเตอร์ในระบบ ")):L("",!0),t("div",ht,[(a(!0),c(h,null,S(r.posters.data,(d,C)=>(a(),b(pt,{key:C,posterDetails:d,onDeletePoster:Dt=>i(d)},null,8,["posterDetails","onDeletePoster"]))),128))]),(a(),b(_,{to:"body"},[v(D,{isModalOpen:f.value},{header:m(()=>o[5]||(o[5]=[t("div",{class:"text-gray-900 text-xl font-medium dark:text-white"}," คุณต้องการลบข้อมูลโปสเตอร์ ",-1)])),body:m(()=>[t("div",yt,[t("img",{class:"shadow-lg rounded-md h-20 w-16 mb-1 mt-1 mr-4",src:`${p(n).cover}`,alt:""},null,8,kt),t("div",Mt,w(p(n).desc),1)])]),footer:m(()=>[t("button",{onClick:o[1]||(o[1]=d=>e()),type:"button",class:"text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-red-800"},"ลบ"),t("button",{onClick:o[2]||(o[2]=d=>x(!1)),type:"button",class:"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:ring-gray-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600"},"ยกเลิก")]),_:1},8,["isModalOpen"])]))]),t("div",_t,[v(U,{pagination:r.posters},null,8,["pagination"])])],64))}});export{Et as default};
