import{_ as U,b as q,r,$ as G,D as H,N as K,o as l,c as v,k as c,e as t,d as g,w as P,a0 as R,u as a,a3 as $,F as j,f as M,t as C,g as D,G as J,j as y,L,T as Q,K as W,M as X,l as p,z as Y}from"./app.351f6ed1.js";import{_ as Z}from"./Modal.5b570c60.js";import{_ as ee}from"./PersonInteractiveCardList.b37b00d4.js";import{_ as te}from"./Paginations.2cb4ddd2.js";import{D as se}from"./DivisionService.2e8f00a7.js";import{T as oe}from"./TraceLogService.6f6e8bd5.js";import{t as re}from"./style.e5e8b7e9.js";import"./ToggleSwitch.8db8c002.js";const m=i=>(W("data-v-241bb721"),i=i(),X(),i),ne={class:"flex flex-col px-2 py-1 w-full"},ie=m(()=>t("div",{class:"mt-2 mb-2 text-2xl font-bold"},"\u0E08\u0E31\u0E14\u0E01\u0E32\u0E23\u0E1A\u0E38\u0E04\u0E25\u0E32\u0E01\u0E23",-1)),le={key:0,class:"flex flex-col sm:flex-row items-start sm:items-center mb-2"},ae=m(()=>t("div",{class:"sm:w-32 text-sm font-medium text-gray-700"},"\u0E2A\u0E32\u0E02\u0E32/\u0E2B\u0E19\u0E48\u0E27\u0E22\u0E07\u0E32\u0E19:",-1)),de=["value"],ue={class:"flex flex-col sm:flex-row sm:justify-between px-2 py-2 space-y-2 mb-2 w-full border rounded-md shadow-md items-baseline"},ce={class:"flex space-x-2 w-full place-self-center"},me={class:"flex space-x-2"},fe=m(()=>t("div",null,[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})])],-1)),pe=m(()=>t("div",null,"\u0E40\u0E1E\u0E34\u0E48\u0E21",-1)),ve=m(()=>t("button",{class:"flex items-center w-28 py-1 px-3 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-black hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500"},[t("div",null,[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})])]),t("div",null,"\u0E40\u0E23\u0E35\u0E22\u0E07\u0E25\u0E33\u0E14\u0E31\u0E1A")],-1)),ge={class:"flex flex-col w-full mb-4"},_e=m(()=>t("div",{class:"text-gray-900 text-xl font-medium dark:text-white"}," \u0E04\u0E38\u0E13\u0E15\u0E49\u0E2D\u0E07\u0E01\u0E32\u0E23\u0E25\u0E1A\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E1A\u0E38\u0E04\u0E25\u0E32\u0E01\u0E23 ",-1)),he={class:"flex flex-row justify-start items-center"},xe=["src"],be={class:"text-gray-900 text-md font-medium dark:text-white"},we={class:"flex justify-center md:justify-end mt-2 px-4"},ye={__name:"Index",props:{persons:{type:Object,required:!0,default:{}},filters:{type:Object}},setup(i){const _=i;q(()=>{B.value.listAll().then(e=>{h.value=e})});const V="/fallbackimage/default-blank-image.jpg",B=r(new se);r(new oe),r(!1);const k=r(!1),h=r([]);r(!1);const x=r(null),F=r(base_url);let n=_.filters.fdivision_selected?r(_.filters.fdivision_selected):r(G().props.value.auth.division_id),f=r(_.filters.search);const u=H({id:null,fullname:null});K(f,e=>{p.Inertia.get(route("admin.person"),{search:e,fdivision_selected:n.value},{preserveState:!0,replace:!0})});const b=e=>{k.value=e,e||(u.reset(),x.value=null)},I=(e,s,d)=>{re({title:s,description:d},{showIcon:!0,transition:"zoom",position:"top-right",type:e,timeout:3e3})},A=()=>{p.Inertia.delete(route("admin.person.delete",u.id),{preserveState:!0,onSuccess:()=>{I("success","\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08","\u0E25\u0E1A\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E1A\u0E38\u0E04\u0E25\u0E32\u0E01\u0E23 \u0E40\u0E23\u0E35\u0E22\u0E1A\u0E23\u0E49\u0E2D\u0E22")},onError:e=>{let s="";for(let d in e)s=s+`- ${e[d]}<br/>`;I("danger","\u0E1E\u0E1A\u0E1B\u0E31\u0E0D\u0E2B\u0E32",s)},onFinish:()=>{u.processing=!1}}),b(!1)},T=()=>{p.Inertia.get(route("admin.person"),{fdivision_selected:n.value},{preserveState:!0,replace:!0})},E=e=>{p.Inertia.get(route("admin.person.view",e.id),{},{preserveState:!0,replace:!0})},N=e=>{p.Inertia.get(route("admin.person.edit",e.id),{},{preserveState:!0,replace:!0})},O=e=>{x.value=e.image?e.image_url:`${F.value}${V}`,u.id=e.id,u.fullname=`${e.fname_th} ${e.lname_th}`,b(!0)},z=e=>{let s=h.value.filter(d=>d.division_id===e);return s.length>0?s[0].slug:""};return(e,s)=>{const d=Y("AdminAppLayout");return l(),v(d,null,{default:c(()=>[t("div",ne,[ie,e.$page.props.auth.abilities.includes("view_all_content")?(l(),g("div",le,[ae,P(t("select",{"onUpdate:modelValue":s[0]||(s[0]=o=>$(n)?n.value=o:n=o),onChange:T,id:"form_division_id",class:"mt-1 w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},[(l(!0),g(j,null,M(h.value,(o,w)=>(l(),g("option",{key:w,value:o.division_id},C(o.name_th),9,de))),128))],544),[[R,a(n)]])])):D("",!0),t("div",ue,[t("div",ce,[P(t("input",{"onUpdate:modelValue":s[1]||(s[1]=o=>$(f)?f.value=o:f=o),type:"text",id:"search",placeholder:"\u0E04\u0E49\u0E19\u0E2B\u0E32\u0E14\u0E49\u0E27\u0E22 \u0E0A\u0E37\u0E48\u0E2D \u0E2B\u0E23\u0E37\u0E2D \u0E19\u0E32\u0E21\u0E2A\u0E01\u0E38\u0E25",class:"block mx-1 focus:ring-indigo-500 focus:border-indigo-500 w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[J,a(f)]])]),t("div",me,[y(a(L),{href:e.route("admin.person.create"),data:{fdivision_selected:a(n)},method:"get",as:"button",type:"button",class:"flex items-center px-3 py-1 text-sm font-bold text-gray-100 transition-colors duration-200 transform bg-green-900 rounded cursor-pointer hover:bg-green-800"},{default:c(()=>[fe,pe]),_:1},8,["href","data"]),a(n)!=0&&i.persons.total>1?(l(),v(a(L),{key:0,href:e.route("admin.person_order",z(parseInt(a(n))))},{default:c(()=>[ve]),_:1},8,["href"])):D("",!0)])]),t("div",ge,[(l(!0),g(j,null,M(i.persons.data,(o,w)=>(l(),v(ee,{key:w,personDetails:o,"order-input":!1,onEditPerson:S=>N(o),onViewPerson:S=>E(o),onDeletePerson:S=>O(o)},null,8,["personDetails","onEditPerson","onViewPerson","onDeletePerson"]))),128))]),(l(),v(Q,{to:"body"},[y(Z,{isModalOpen:k.value},{header:c(()=>[_e]),body:c(()=>[t("div",he,[t("img",{src:x.value,alt:"",class:"h-20 w-20 rounded-full object-cover mr-4"},null,8,xe),t("div",be,C(a(u).fullname),1)])]),footer:c(()=>[t("button",{onClick:s[2]||(s[2]=o=>A()),type:"button",class:"text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-red-800"},"\u0E25\u0E1A"),t("button",{onClick:s[3]||(s[3]=o=>b(!1)),type:"button",class:"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:ring-gray-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600"},"\u0E22\u0E01\u0E40\u0E25\u0E34\u0E01")]),_:1},8,["isModalOpen"])])),t("div",we,[y(te,{pagination:i.persons},null,8,["pagination"])])])]),_:1})}}};var De=U(ye,[["__scopeId","data-v-241bb721"]]);export{De as default};
