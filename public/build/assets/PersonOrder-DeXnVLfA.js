import{i as x,o as n,e as a,_ as P,r as f,u as S,c as l,a as s,f as D,g as _,b as i,n as v,l as O,w as y,q as V,F as h,h as g,t as q,P as F,j as T}from"./app-D79H12wH.js";import{_ as $}from"./PersonInteractiveCardList-D6sBcdlb.js";import{S as j}from"./sweetalert2-z6gKu1nJ.js";import{r as N}from"./ReplyIcon-C0v7rYHO.js";import{P as z}from"./PersonService-CPafniEr.js";import{t as A}from"./style-BXcp9AX6.js";import"./EyeIcon-DhRyjPMa.js";import"./ToggleSwitch-CTkEKEYz.js";function E(d,u){return n(),x("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})])}const L={class:"flex flex-col p-4 w-full"},M={class:"flex flex-col sm:flex-row sm:justify-between px-2 py-2 space-y-2 mb-2 w-full border rounded-md shadow-md items-baseline"},H={class:"flex items-center px-3 py-1 text-sm font-bold text-gray-100 transition-colors duration-200 transform bg-green-900 rounded-sm cursor-pointer hover:bg-green-800"},I={class:"mt-0 mb-2 md:col-span-2"},U={class:"shadow-sm overflow-hidden sm:rounded-md"},G={class:"px-4 py-5 bg-white sm:p-6"},J={class:"grid grid-cols-6 gap-3"},K={class:"col-span-6 sm:col-span-6"},Q=["value"],R={class:"flex flex-col sm:flex-row"},W={class:"flex flex-col w-full"},X={layout:P},le=Object.assign(X,{__name:"PersonOrder",props:{person_types:{type:Array,required:!0},division_id:{type:Number,required:!0},division_slug:{type:String,required:!0}},setup(d){const u=d,w=f(new z),r=f([]),c=S({type:null}),m=(t,e,o)=>{A({title:e,description:o},{showIcon:!0,transition:"zoom",position:"top-right",type:t,timeout:3e3})},b=()=>{j.fire({title:"ต้องการเรียงลำดับการแสดงผลบุคลากร?",icon:"question",showCancelButton:!0,confirmButtonColor:"#1e40af",cancelButtonColor:"#6b7280",confirmButtonText:"ตกลง",cancelButtonText:"ยกเลิก"}).then(t=>{t.isConfirmed&&C()})},k=()=>{w.value.listPersonByDivisionAndType(u.division_id,c.type).then(t=>{r.value=t})},B=t=>{r.value=r.value.sort((e,o)=>o.profiles.leader-e.profiles.leader||e.display_order-o.display_order)},C=()=>{T.post(route("admin.person.update_display_order"),{person_list:r.value,division_slug:u.division_slug},{onSuccess:()=>{m("success","สำเร็จ","จัดเก็บข้อมูลการเรียงลำดับเรียบร้อย")},onError:t=>{let e="";for(let o in t)e=e+`- ${t[o]}<br/>`;m("danger","พบปัญหา",e)},onFinish:()=>{}})};return(t,e)=>(n(),l("div",L,[s("div",M,[e[2]||(e[2]=s("div",{class:"text-2xl font-bold"},"เรียงการแสดงผลบุคคลากร",-1)),a(i(O),{href:t.route("admin.person"),method:"get",as:"button",type:"button"},{default:D(()=>[s("button",H,[a(i(N),{class:v(["h-6 w-6 mr-2"])}),e[1]||(e[1]=_(" กลับไปหน้าจัดการบุคคลากร ",-1))])]),_:1},8,["href"])]),s("div",I,[s("div",U,[s("div",G,[s("div",J,[s("div",K,[e[3]||(e[3]=s("label",{for:"person_types",class:"block text-sm font-medium text-gray-700"},"ประเภทบุคคลากร:",-1)),y(s("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>i(c).type=o),onChange:k,id:"person_types",class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-xs focus:outline-hidden focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},[(n(!0),l(h,null,g(d.person_types,(o,p)=>(n(),l("option",{key:p,value:o.type},q(o.person_type),9,Q))),128))],544),[[V,i(c).type]])])])])])]),s("div",R,[y(s("button",{onClick:b,class:"flex items-center mx-1 text-emerald-500 bg-white hover:bg-emerald-100 focus:ring-4 focus:ring-emerald-300 rounded-lg border border-emerald-200 text-sm font-medium px-5 py-2 hover:text-emerald-900 focus:z-10"},[a(i(E),{class:v(["h-6 w-6 mr-2"])}),e[4]||(e[4]=_(" บันทึก ",-1))],512),[[F,r.value.length>=1]])]),s("div",W,[(n(!0),l(h,null,g(r.value,(o,p)=>(n(),x($,{key:p,personDetails:o,"order-input":!0,onOrderPerson:Y=>B()},null,8,["personDetails","onOrderPerson"]))),128))])]))}});export{le as default};
