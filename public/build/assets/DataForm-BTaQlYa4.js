import{_ as C,r as u,k as V,u as B,c as i,o as d,a as t,e as y,t as g,f as _,g as b,b as p,l as w,w as D,v as N,F as S,h as $,d as k}from"./app-CThLaVYF.js";import{t as E}from"./style-CsHwp4Nu.js";const M={class:"flex flex-col p-4 w-full"},O={class:"flex flex-col sm:flex-row sm:justify-between px-2 py-2 space-y-2 mb-4 w-full border border-gray-200 rounded-md shadow-md items-baseline"},P={class:"text-2xl font-bold"},T={class:"shadow-sm overflow-hidden sm:rounded-md"},q={class:"px-4 py-5 bg-white sm:p-6"},I={class:"grid grid-cols-6 gap-6 mb-6"},L={class:"col-span-6"},U={class:"col-span-6"},W={class:"my-1"},A={class:"flex items-center flex-col sm:flex-row justify-between border border-indigo-500 rounded-md"},G={class:"flex flex-col"},H={class:"p-2"},J={class:"flex items-center m-2 sm:m-1"},K={class:"p-2 mt-2 text-sm cursor-pointer rounded-lg shadow-lg border text-white border-indigo-500 bg-blue-700 hover:bg-blue-800 hover:text-white"},Q=["id","accept","onChange"],R={class:"flex flex-row mt-2 space-x-4"},X={layout:C},ee=Object.assign(X,{__name:"DataForm",props:{action:{type:String,require:!0,default:"insert"},poster:{type:Object}},setup(m){const n=m,c=u(null),h=u(!1),x=u(!1),v=u(!1),f=V([{name:"",size:0,label:"เพิ่มรูปหน้าปก",accept:".jpg,.jpeg"},{name:"",size:0,label:"เพิ่มไฟล์เนื้อหา",accept:".jpg,.jpeg,.pdf"}]);switch(n.action){case"insert":c.value="เพิ่ม";break;case"update":c.value="แก้ไข";break;case"delete":c.value="ลบ";break}const a=B({id:n.poster?n.poster.id:null,desc:n.poster?n.poster.desc:null,cover:""}),l=(o,e,s)=>{E({title:e,description:s},{showIcon:!0,transition:"zoom",position:"top-right",type:o,timeout:3e3})},F=(o,e,s)=>{let r=s.target.files[0];e.File=r,e.name=r.name,e.size=r.size,e.size>1024*1024*16?(h.value=!1,l("warning","คำเตือน","เพิ่มไฟล์ไม่ได้ เนื่องจากไฟล์ของคุณมีขนาดใหญ่กว่า 16MB")):h.value=!0,o===0?r.type.match("image/jp.*")?x.value=!0:(x.value=!1,l("warning","คำเตือน","เพิ่มไฟล์หน้าปกไม่ได้ เนื่องจากอนุญาตให้แนบไฟล์เฉพาะ .jpg เท่านั้น")):r.type.match("image/jp.*")||r.type.match("application/pdf")?v.value=!0:(v.value=!1,l("warning","คำเตือน","เพิ่มไฟล์เนื้อหาไม่ได้ เนื่องจากอนุญาตให้แนบไฟล์เฉพาะ .jpg หรือ PDF เท่านั้น"))},j=()=>{let o="";a.id||a.transform(e=>({...e,cover:f[0].File,content:f[1].File})).post(route("admin.poster.store"),{onSuccess:()=>{l("success","สำเร็จ","จัดเก็บข้อมูลโปสเตอร์ เรียบร้อย")},onError:e=>{for(let s in e)o=o+`- ${e[s]}<br/>`;l("danger","พบข้อผิดพลาด",o)},onFinish:()=>{a.processing=!1}})};return(o,e)=>(d(),i("div",M,[t("div",O,[t("div",P,g(c.value)+"ข้อมูลโปสเตอร์",1),y(p(w),{href:o.route("admin.poster"),method:"get",as:"button",type:"button",class:"px-3 py-1 text-sm font-bold text-gray-100 transition-colors duration-200 transform bg-green-900 rounded-sm cursor-pointer hover:bg-green-800"},{default:_(()=>e[1]||(e[1]=[b(" กลับหน้าหลัก ",-1)])),_:1,__:[1]},8,["href"])]),e[5]||(e[5]=t("div",{class:"text-gray-900 text-lg underline font-medium dark:text-white mb-4"}," รายละเอียดข้อมูลโปสเตอร์ ",-1)),t("div",T,[t("div",q,[t("fieldset",null,[t("div",I,[t("div",L,[e[2]||(e[2]=t("div",{class:"flex items-center justify-between"},[t("label",{for:"desc",class:"block text-sm font-medium text-gray-700"},"รายละเอียดโปสเตอร์")],-1)),D(t("input",{type:"text",id:"desc","onUpdate:modelValue":e[0]||(e[0]=s=>p(a).desc=s),class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-xs sm:text-sm border-gray-300 rounded-md"},null,512),[[N,p(a).desc,void 0,{trim:!0}]])]),t("ul",U,[(d(!0),i(S,null,$(f,(s,r)=>(d(),i("li",{key:r},[t("div",W,[t("div",A,[t("div",G,[t("div",H,[e[3]||(e[3]=t("strong",null,"ชื่อไฟล์ : ",-1)),b(g(s.name),1)])]),t("div",J,[t("label",null,[t("span",K,g(s.label),1),t("input",{id:"file-"+r,type:"file",accept:s.accept,onChange:z=>F(r,s,z),style:{display:"none"}},null,40,Q)])])])])]))),128))])])])])]),t("div",R,[m.action==="insert"?(d(),i("button",{key:0,type:"button",onClick:j,class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center"},"จัดเก็บ")):k("",!0),m.action==="update"?(d(),i("button",{key:1,type:"button",onClick:s=>!0,class:"text-white bg-orange-700 hover:bg-orange-800 focus:ring-4 focus:ring-orange-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center"},"แก้ไข")):k("",!0),y(p(w),{href:o.route("admin.poster"),method:"get",as:"button",type:"button",class:"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:ring-gray-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10"},{default:_(()=>e[4]||(e[4]=[b(" ยกเลิก ",-1)])),_:1,__:[4]},8,["href"])])]))}});export{ee as default};
