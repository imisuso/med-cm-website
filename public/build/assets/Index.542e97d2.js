import{C as z,b as q,r,a6 as A,G,P as H,o as l,d as m,w as P,a7 as R,u as a,e as t,F as S,f as $,t as j,aa as M,g as C,I as J,j as b,k as f,L as V,c as w,T as K,N as Q,O as W,a4 as X,l as p}from"./app.1938cfdc.js";import{_ as Y}from"./Modal.765021be.js";import{_ as Z}from"./PersonInteractiveCardList.33e329ab.js";import{_ as ee}from"./Paginations.087f07f5.js";import{D as te}from"./DivisionService.13725827.js";import{T as se}from"./TraceLogService.e5942b2c.js";import{t as oe}from"./style.a2830707.js";import"./ToggleSwitch.b168e8f0.js";const u=i=>(Q("data-v-3de191de"),i=i(),W(),i),re={class:"flex flex-col px-2 py-1 w-full"},ne=u(()=>t("div",{class:"mt-2 mb-2 text-2xl font-bold"},"\u0E08\u0E31\u0E14\u0E01\u0E32\u0E23\u0E1A\u0E38\u0E04\u0E25\u0E32\u0E01\u0E23",-1)),ie={key:0,class:"flex flex-col sm:flex-row items-start sm:items-center mb-2"},le=u(()=>t("div",{class:"sm:w-32 text-sm font-medium text-gray-700"},"\u0E2A\u0E32\u0E02\u0E32/\u0E2B\u0E19\u0E48\u0E27\u0E22\u0E07\u0E32\u0E19:",-1)),ae=["value"],de={class:"flex flex-col sm:flex-row sm:justify-between px-2 py-2 space-y-2 mb-2 w-full border rounded-md shadow-md items-baseline"},ue={class:"flex space-x-2 w-full place-self-center"},ce={class:"flex space-x-2"},me=u(()=>t("div",null,[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})])],-1)),fe=u(()=>t("div",null,"\u0E40\u0E1E\u0E34\u0E48\u0E21",-1)),pe=u(()=>t("button",{class:"flex items-center w-28 py-1 px-3 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-black hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500"},[t("div",null,[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})])]),t("div",null,"\u0E40\u0E23\u0E35\u0E22\u0E07\u0E25\u0E33\u0E14\u0E31\u0E1A")],-1)),ve={class:"flex flex-col w-full mb-4"},ge=u(()=>t("div",{class:"text-gray-900 text-xl font-medium"}," \u0E04\u0E38\u0E13\u0E15\u0E49\u0E2D\u0E07\u0E01\u0E32\u0E23\u0E25\u0E1A\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E1A\u0E38\u0E04\u0E25\u0E32\u0E01\u0E23 ",-1)),_e={class:"flex flex-row justify-start items-center"},he=["src"],xe={class:"text-gray-900 text-md font-medium"},be={class:"flex justify-center md:justify-end mt-2 px-4"},we={layout:X},ye=Object.assign(we,{__name:"Index",props:{persons:{type:Object,required:!0,default:{}},filters:{type:Object}},setup(i){const v=i;q(()=>{B.value.listAll().then(e=>{g.value=e})});const D="/fallbackimage/default-blank-image.jpg",B=r(new te);r(new se),r(!1);const y=r(!1),g=r([]);r(!1);const _=r(null),F=r(base_url);let n=v.filters.fdivision_selected?r(v.filters.fdivision_selected):r(A().props.value.auth.division_id),c=r(v.filters.search);const d=G({id:null,fullname:null});H(c,e=>{p.Inertia.get(route("admin.person"),{search:e,fdivision_selected:n.value},{preserveState:!0,replace:!0})});const h=e=>{y.value=e,e||(d.reset(),_.value=null)},k=(e,o,s)=>{oe({title:o,description:s},{showIcon:!0,transition:"zoom",position:"top-right",type:e,timeout:3e3})},L=()=>{p.Inertia.delete(route("admin.person.delete",d.id),{preserveState:!0,onSuccess:()=>{k("success","\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08","\u0E25\u0E1A\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E1A\u0E38\u0E04\u0E25\u0E32\u0E01\u0E23 \u0E40\u0E23\u0E35\u0E22\u0E1A\u0E23\u0E49\u0E2D\u0E22")},onError:e=>{let o="";for(let s in e)o=o+`- ${e[s]}<br/>`;k("danger","\u0E1E\u0E1A\u0E1B\u0E31\u0E0D\u0E2B\u0E32",o)},onFinish:()=>{d.processing=!1}}),h(!1)},O=()=>{p.Inertia.get(route("admin.person"),{fdivision_selected:n.value},{preserveState:!0,replace:!0})},T=e=>{p.Inertia.get(route("admin.person.view",e.id),{},{preserveState:!0,replace:!0})},E=e=>{p.Inertia.get(route("admin.person.edit",e.id),{},{preserveState:!0,replace:!0})},N=e=>{_.value=e.image?e.image_url:`${F.value}${D}`,d.id=e.id,d.fullname=`${e.fname_th} ${e.lname_th}`,h(!0)},U=e=>{let o=g.value.filter(s=>s.division_id===e);return o.length>0?o[0].slug:""};return(e,o)=>(l(),m("div",re,[ne,e.$page.props.auth.abilities.includes("view_all_content")?(l(),m("div",ie,[le,P(t("select",{"onUpdate:modelValue":o[0]||(o[0]=s=>M(n)?n.value=s:n=s),onChange:O,id:"form_division_id",class:"mt-1 w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},[(l(!0),m(S,null,$(g.value,(s,x)=>(l(),m("option",{key:x,value:s.division_id},j(s.name_th),9,ae))),128))],544),[[R,a(n)]])])):C("",!0),t("div",de,[t("div",ue,[P(t("input",{"onUpdate:modelValue":o[1]||(o[1]=s=>M(c)?c.value=s:c=s),type:"text",id:"search",placeholder:"\u0E04\u0E49\u0E19\u0E2B\u0E32\u0E14\u0E49\u0E27\u0E22 \u0E0A\u0E37\u0E48\u0E2D \u0E2B\u0E23\u0E37\u0E2D \u0E19\u0E32\u0E21\u0E2A\u0E01\u0E38\u0E25",class:"block mx-1 focus:ring-indigo-500 focus:border-indigo-500 w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[J,a(c)]])]),t("div",ce,[b(a(V),{href:e.route("admin.person.create"),data:{fdivision_selected:a(n)},method:"get",as:"button",type:"button",class:"flex items-center px-3 py-1 text-sm font-bold text-gray-100 transition-colors duration-200 transform bg-green-900 rounded cursor-pointer hover:bg-green-800"},{default:f(()=>[me,fe]),_:1},8,["href","data"]),a(n)!=0&&i.persons.total>1?(l(),w(a(V),{key:0,href:e.route("admin.person_order",U(parseInt(a(n))))},{default:f(()=>[pe]),_:1},8,["href"])):C("",!0)])]),t("div",ve,[(l(!0),m(S,null,$(i.persons.data,(s,x)=>(l(),w(Z,{key:x,personDetails:s,"order-input":!1,onEditPerson:I=>E(s),onViewPerson:I=>T(s),onDeletePerson:I=>N(s)},null,8,["personDetails","onEditPerson","onViewPerson","onDeletePerson"]))),128))]),(l(),w(K,{to:"body"},[b(Y,{isModalOpen:y.value},{header:f(()=>[ge]),body:f(()=>[t("div",_e,[t("img",{src:_.value,alt:"",class:"h-20 w-20 rounded-full object-cover mr-4"},null,8,he),t("div",xe,j(a(d).fullname),1)])]),footer:f(()=>[t("button",{onClick:o[2]||(o[2]=s=>L()),type:"button",class:"text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center"},"\u0E25\u0E1A"),t("button",{onClick:o[3]||(o[3]=s=>h(!1)),type:"button",class:"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:ring-gray-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10"},"\u0E22\u0E01\u0E40\u0E25\u0E34\u0E01")]),_:1},8,["isModalOpen"])])),t("div",be,[b(ee,{pagination:i.persons},null,8,["pagination"])])]))}});var Ve=z(ye,[["__scopeId","data-v-3de191de"]]);export{Ve as default};
