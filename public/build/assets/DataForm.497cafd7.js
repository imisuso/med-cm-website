import{r as p,a5 as q,s as I,E as P,G as Q,a6 as R,o as d,d as r,e,t as x,j as y,k as V,u as l,L as j,w as S,a7 as U,F,f as C,g as w,I as J,m as k,a4 as G,a8 as W,H as K,z as T}from"./app.5ef6262d.js";import{d as h}from"./th.4cb7964f.js";import{t as X}from"./style.41f80f12.js";const Z={class:"flex flex-col p-4 w-full"},ee={class:"flex flex-col sm:flex-row sm:justify-between px-2 py-2 space-y-2 mb-2 w-full border rounded-md shadow-md items-baseline"},te={class:"text-2xl font-bold"},oe=k(" \u0E01\u0E25\u0E31\u0E1A\u0E2B\u0E19\u0E49\u0E32\u0E2B\u0E25\u0E31\u0E01 "),se=e("div",{class:"text-gray-900 text-lg underline font-medium dark:text-white mb-4"}," \u0E23\u0E32\u0E22\u0E25\u0E30\u0E40\u0E2D\u0E35\u0E22\u0E14\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E02\u0E48\u0E32\u0E27\u0E1B\u0E23\u0E30\u0E01\u0E32\u0E28 ",-1),ne={class:"grid grid-cols-6 gap-2"},ie={class:"mt-5 md:mt-0 col-span-6"},ae={class:"shadow overflow-hidden sm:rounded-md"},le={class:"px-4 py-5 bg-white sm:p-6"},de=["disabled"],re={class:"grid grid-cols-6 gap-6 mb-6"},ce={class:"col-span-6"},ue=e("label",{for:"topic",class:"block text-sm font-medium text-gray-700 mb-2"},"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E1B\u0E23\u0E30\u0E01\u0E32\u0E28\u0E2B\u0E21\u0E14\u0E2D\u0E32\u0E22\u0E38",-1),me={key:0,class:"col-span-6"},_e=e("label",{for:"division_selected",class:"block text-sm font-medium text-gray-700"},"\u0E2A\u0E32\u0E02\u0E32/\u0E2B\u0E19\u0E48\u0E27\u0E22\u0E07\u0E32\u0E19",-1),pe=e("option",{value:"0"},"\u0E15\u0E32\u0E21\u0E2A\u0E32\u0E02\u0E32/\u0E2B\u0E19\u0E48\u0E27\u0E22\u0E07\u0E32\u0E19\u0E1C\u0E39\u0E49\u0E1B\u0E23\u0E30\u0E01\u0E32\u0E28",-1),fe=["value"],he={class:"col-span-6"},ge=e("div",{class:"flex items-center justify-between"},[e("label",{for:"topic",class:"block text-sm font-medium text-gray-700"},"\u0E2B\u0E31\u0E27\u0E02\u0E49\u0E2D\u0E02\u0E48\u0E32\u0E27")],-1),ve={key:1,class:"col-span-6"},be={class:"my-1"},xe={class:"flex items-center flex-col sm:flex-row justify-between border border-indigo-500 rounded-md"},ye={class:"flex flex-col"},we={class:"p-2"},ke=e("strong",null,"\u0E0A\u0E37\u0E48\u0E2D\u0E44\u0E1F\u0E25\u0E4C : ",-1),De={class:"flex items-center m-2 sm:m-0"},Fe=["onClick"],Ce=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 hover:fill-current",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),Me=[Ce],Ye={class:"col-span-6"},Ve={class:"my-1"},je={class:"flex items-center flex-col sm:flex-row justify-between border border-indigo-500 rounded-md"},Se={class:"flex flex-col"},Te={class:"p-2"},Ee=e("strong",null,"\u0E0A\u0E37\u0E48\u0E2D\u0E44\u0E1F\u0E25\u0E4C : ",-1),He={class:"flex items-center m-2 sm:m-0"},Ne=e("span",{class:"p-2 mt-2 text-sm cursor-pointer rounded-lg shadow-lg border text-white border-indigo-500 bg-blue-700 hover:bg-blue-800 hover:text-white"},"\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E44\u0E1F\u0E25\u0E4C",-1),$e=["id","onChange"],Le=["onClick"],ze=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 hover:fill-current",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),Ae=[ze],Be=e("div",{class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center"}," \u0E40\u0E1E\u0E34\u0E48\u0E21\u0E44\u0E1F\u0E25\u0E4C\u0E41\u0E19\u0E1A ",-1),Oe=[Be],qe={class:""},Ie=e("label",{for:"topic",class:"block text-sm font-medium text-gray-700 mt-2 mb-2"},"\u0E40\u0E19\u0E37\u0E49\u0E2D\u0E2B\u0E32\u0E02\u0E48\u0E32\u0E27\u0E1B\u0E23\u0E30\u0E01\u0E32\u0E28",-1),Pe={class:"flex flex-row mt-4 space-x-4"},Qe=k(" \u0E22\u0E01\u0E40\u0E25\u0E34\u0E01 "),Re={layout:G},We=Object.assign(Re,{__name:"DataForm",props:{action:{type:String,require:!0,default:"create"},announce:{type:Object},divisions:{type:Array},fdivision_selected:{type:Number}},setup(f){const s=f,g=p(),E=p([["bold","italic","underline","strike"],["blockquote"],[{header:[1,2,3,4,!1]}],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["link"],["clean"]]),H=q(()=>W(()=>import("./MonthYearCustom.af1e61ce.js"),["assets/MonthYearCustom.af1e61ce.js","assets/MonthYearCustom.23b56820.css","assets/app.5ef6262d.js","assets/app.bac735bb.css"])),N=I(()=>H),v=p(null),$=p(!1),L=["\u0E21\u0E01\u0E23\u0E32\u0E04\u0E21","\u0E01\u0E38\u0E21\u0E20\u0E32\u0E1E\u0E31\u0E19\u0E18\u0E4C","\u0E21\u0E35\u0E19\u0E32\u0E04\u0E21","\u0E40\u0E21\u0E29\u0E32\u0E22\u0E19","\u0E1E\u0E24\u0E29\u0E20\u0E32\u0E04\u0E21","\u0E21\u0E34\u0E16\u0E38\u0E19\u0E32\u0E22\u0E19","\u0E01\u0E23\u0E01\u0E0E\u0E32\u0E04\u0E21","\u0E2A\u0E34\u0E07\u0E2B\u0E32\u0E04\u0E21","\u0E01\u0E31\u0E19\u0E22\u0E32\u0E22\u0E19","\u0E15\u0E38\u0E25\u0E32\u0E04\u0E21","\u0E1E\u0E24\u0E28\u0E08\u0E34\u0E01\u0E32\u0E22\u0E19","\u0E18\u0E31\u0E19\u0E27\u0E32\u0E04\u0E21"],z=p(h().startOf("day").toDate()),c=P([]),n=Q({id:s.announce?s.announce.id:null,pinned:s.announce?s.announce.pinned:!1,topic:s.announce?s.announce.topic:null,detail_delta:s.announce?JSON.parse(s.announce.detail_delta):{},expire_date:s.announce?h(s.announce.expire_date).toDate():p(h(z.value).add(30,"day").toDate()),division_id:s.fdivision_selected?s.fdivision_selected:R().props.value.auth.division_id,type:s.announce?s.announce.type:1,old_attachments:s.announce?s.announce.attach_files.length>0?s.announce.attach_files:[]:[]});switch(s.action){case"create":v.value="\u0E40\u0E1E\u0E34\u0E48\u0E21";break;case"edit":v.value="\u0E41\u0E01\u0E49\u0E44\u0E02";break;case"view":v.value="\u0E14\u0E39";break}const A=()=>{g.value.getQuill().enable(!0)},M=o=>{const t=o.getDate(),i=o.getMonth(),m=o.getFullYear();return`\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48 ${t} ${L.at(i)} ${m+543}`},B=()=>{c.push({name:"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E44\u0E1F\u0E25\u0E4C",size:0}),K(()=>{var o="file-"+(c.length-1);document.getElementById(o).click()})},b=(o,t)=>{o.splice(t,1)},O=(o,t,i)=>{let m=i.target.files[0];t.File=m,t.name=m.name,t.size=m.size,t.size>1024*1024*5&&(b(c,o),_("warning","\u0E1E\u0E1A\u0E02\u0E49\u0E2D\u0E1C\u0E34\u0E14\u0E1E\u0E25\u0E32\u0E14","\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E44\u0E1F\u0E25\u0E4C\u0E41\u0E19\u0E1A\u0E44\u0E21\u0E48\u0E44\u0E14\u0E49 \u0E40\u0E19\u0E37\u0E48\u0E2D\u0E07\u0E08\u0E32\u0E01\u0E44\u0E1F\u0E25\u0E4C\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13\u0E43\u0E2B\u0E0D\u0E48\u0E40\u0E01\u0E34\u0E19\u0E44\u0E1B (> 5MB)")),m.type.match("application/pdf")||(b(c,o),_("warning","\u0E1E\u0E1A\u0E02\u0E49\u0E2D\u0E1C\u0E34\u0E14\u0E1E\u0E25\u0E32\u0E14","\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E44\u0E1F\u0E25\u0E4C\u0E41\u0E19\u0E1A\u0E44\u0E21\u0E48\u0E44\u0E14\u0E49 \u0E40\u0E19\u0E37\u0E48\u0E2D\u0E07\u0E08\u0E32\u0E01\u0E2D\u0E19\u0E38\u0E0D\u0E32\u0E15\u0E43\u0E2B\u0E49\u0E41\u0E19\u0E1A\u0E44\u0E1F\u0E25\u0E4C\u0E40\u0E09\u0E1E\u0E32\u0E30 PDF \u0E40\u0E17\u0E48\u0E32\u0E19\u0E31\u0E49\u0E19"))},Y=()=>{let o="";n.id?n.transform(t=>({...t,expire_date:h(t.expire_date).format("YYYY-MM-DD HH:mm:ss"),detail_delta:JSON.stringify(t.detail_delta),detail_html:g.value.getHTML(),atFiles:c.map(i=>i.File)})).post(route("admin.announce.update",n.id),{_method:"patch",preserveState:!1,onSuccess:()=>{_("success","\u0E41\u0E01\u0E49\u0E44\u0E02\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08","\u0E41\u0E01\u0E49\u0E44\u0E02\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E1B\u0E23\u0E30\u0E01\u0E32\u0E28 \u0E40\u0E23\u0E35\u0E22\u0E1A\u0E23\u0E49\u0E2D\u0E22")},onError:t=>{for(let i in t)o=o+`- ${t[i]}<br/>`;_("danger","\u0E1E\u0E1A\u0E02\u0E49\u0E2D\u0E1C\u0E34\u0E14\u0E1E\u0E25\u0E32\u0E14",o)},onFinish:()=>{n.processing=!1}}):n.transform(t=>({...t,expire_date:h(t.expire_date).format("YYYY-MM-DD HH:mm:ss"),detail_delta:JSON.stringify(t.detail_delta),detail_html:g.value.getHTML(),atFiles:c.map(i=>i.File)})).post(route("admin.announce.store"),{preserveState:!1,onSuccess:()=>{_("success","\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08","\u0E08\u0E31\u0E14\u0E40\u0E01\u0E47\u0E1A\u0E1B\u0E23\u0E30\u0E01\u0E32\u0E28\u0E40\u0E23\u0E35\u0E22\u0E1A\u0E23\u0E49\u0E2D\u0E22")},onError:t=>{for(let i in t)o=o+`- ${t[i]}<br/>`;_("danger","\u0E1E\u0E1A\u0E02\u0E49\u0E2D\u0E1C\u0E34\u0E14\u0E1E\u0E25\u0E32\u0E14",o)},onFinish:()=>{n.processing=!1}}),c.splice(0)},_=(o,t,i)=>{X({title:t,description:i},{showIcon:!0,transition:"zoom",position:"top-right",type:o,timeout:3e3})};return(o,t)=>{const i=T("Datepicker"),m=T("QuillEditor");return d(),r("div",Z,[e("div",ee,[e("div",te,x(v.value)+"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E02\u0E48\u0E32\u0E27\u0E1B\u0E23\u0E30\u0E01\u0E32\u0E28",1),y(l(j),{href:o.route("admin.announce"),data:{fdivision_selected:f.fdivision_selected},method:"get",as:"button",type:"button",class:"px-3 py-1 text-sm font-bold text-gray-100 transition-colors duration-200 transform bg-green-900 rounded cursor-pointer hover:bg-green-800"},{default:V(()=>[oe]),_:1},8,["href","data"])]),se,e("div",ne,[e("div",ie,[e("div",ae,[e("div",le,[e("fieldset",{disabled:$.value},[e("div",re,[e("div",ce,[ue,y(i,{inputClassName:"dp-custom-input",placeholder:"default 30 \u0E27\u0E31\u0E19",modelValue:l(n).expire_date,"onUpdate:modelValue":t[0]||(t[0]=a=>l(n).expire_date=a),locale:"th",cancelText:"\u0E22\u0E01\u0E40\u0E25\u0E34\u0E01",selectText:"\u0E40\u0E25\u0E37\u0E2D\u0E01","month-year-component":l(N),yearRange:[new Date().getFullYear()-2,new Date().getFullYear()+5],enableTimePicker:!1,format:M,previewFormat:M,minDate:new Date,clearable:!1,autoApply:""},null,8,["modelValue","month-year-component","yearRange","minDate"])]),o.$page.props.auth.abilities.includes("view_all_content")?(d(),r("div",me,[_e,S(e("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>l(n).division_id=a),id:"division_selected",class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},[pe,(d(!0),r(F,null,C(f.divisions,(a,u)=>(d(),r("option",{key:u,value:a.division_id},x(a.name_th),9,fe))),128))],512),[[U,l(n).division_id]])])):w("",!0),e("div",he,[ge,S(e("input",{type:"text",id:"topic","onUpdate:modelValue":t[2]||(t[2]=a=>l(n).topic=a),class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[J,l(n).topic,void 0,{trim:!0}]])]),l(n).old_attachments?(d(),r("div",ve,[e("ul",null,[(d(!0),r(F,null,C(l(n).old_attachments,(a,u)=>(d(),r("li",{key:u},[e("div",be,[e("div",xe,[e("div",ye,[e("div",we,[ke,k(x(a.orig_name),1)])]),e("div",De,[e("a",{href:"#",onClick:D=>b(l(n).old_attachments,u),class:"flex items-center text-sm text-red-600 px-2 py-2"},Me,8,Fe)])])])]))),128))])])):w("",!0),e("div",Ye,[e("ul",null,[(d(!0),r(F,null,C(c,(a,u)=>(d(),r("li",{key:u},[e("div",Ve,[e("div",je,[e("div",Se,[e("div",Te,[Ee,k(x(a.name),1)])]),e("div",He,[e("label",null,[Ne,e("input",{id:"file-"+u,type:"file",accept:".pdf",onChange:D=>O(u,a,D),style:{display:"none"}},null,40,$e)]),e("a",{href:"#",onClick:D=>b(c,u),class:"flex items-center text-sm text-red-600 px-2 py-2"},Ae,8,Le)])])])]))),128))]),e("a",{href:"#",onClick:B,class:"add"},Oe)])])],8,de)])])])]),e("div",qe,[Ie,y(m,{id:"quill_e",ref_key:"quill_e",ref:g,theme:"snow",content:l(n).detail_delta,"onUpdate:content":t[3]||(t[3]=a=>l(n).detail_delta=a),contentType:"delta",toolbar:E.value,onReady:A},null,8,["content","toolbar"])]),e("div",Pe,[f.action==="create"?(d(),r("button",{key:0,type:"button",onClick:Y,class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center"},"\u0E08\u0E31\u0E14\u0E40\u0E01\u0E47\u0E1A")):w("",!0),f.action==="edit"?(d(),r("button",{key:1,type:"button",onClick:Y,class:"text-white bg-orange-700 hover:bg-orange-800 focus:ring-4 focus:ring-orange-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center"},"\u0E41\u0E01\u0E49\u0E44\u0E02")):w("",!0),y(l(j),{href:o.route("admin.announce"),data:{fdivision_selected:l(n).division_id},method:"get",as:"button",type:"button",class:"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:ring-gray-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10"},{default:V(()=>[Qe]),_:1},8,["href","data"])])])}}});export{We as default};
