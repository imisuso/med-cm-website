import{x as h,_ as k,y as j,r as v,u as D,p as V,c as r,o as d,a as t,e as a,f as S,b as n,l as $,d as A,w as u,v as B,q as g,F as c,h as x,t as F,g as N,i as C,j as E}from"./app-hqx2E7IE.js";import"./th-jwAintKK.js";import{_ as I}from"./AnnounceItemInteractiveCardList-7ONLlzco.js";import{_ as M}from"./Paginations-DUij_wbg.js";import{r as U}from"./SearchIcon-DAvyH8Rd.js";import{D as q}from"./DivisionService-CUhOWJfm.js";import{t as O}from"./style-C1JcBHZz.js";import"./buddhistEra-D3ZgCclG.js";import"./Modal-BxmZoiPo.js";const T={class:"flex flex-col p-4 w-full"},z={class:"flex flex-col sm:flex-row sm:justify-between px-2 py-2 space-y-2 mb-2 w-full border border-gray-200 rounded-md shadow-md items-baseline"},H={class:"mt-0 mb-2 md:col-span-2"},L={class:"shadow-sm overflow-hidden sm:rounded-md"},P={class:"px-4 py-5 bg-white sm:p-6"},G={class:"grid grid-cols-6 gap-2"},J={class:"col-span-6"},K={key:0,class:"col-span-6 sm:col-span-3"},Q=["value"],R={class:"col-span-6 sm:col-span-3"},W={class:"px-4 py-1 bg-gray-50 text-left sm:px-6"},X={class:"flex justify-center md:justify-end mt-2 px-4"},Y={layout:k},Z=Object.assign(Y,{__name:"Index",props:{announces:{type:Object,required:!0,default:{}},fdivision_selected:{type:Number}},setup(l){j(()=>{_.value.listAll().then(s=>{f.value=s})});const p=l,_=v(new q),f=v([]),i=D({ftopic:null,fexpire_type:"all",fdivision_selected:p.fdivision_selected?p.fdivision_selected:V().props.auth.division_id}),b=(s,e,o)=>{O({title:e,description:o},{showIcon:!0,transition:"zoom",position:"top-right",type:s,timeout:3e3})},y=()=>{i.get(route("admin.announce"),{preserveState:!0,replace:!0,onError:s=>{let e="";for(let o in s)e=e+`- ${s[o]}<br/>`;b("info","ข้อแนะนำ",e)},onFinish:()=>{i.processing=!1}})},w=s=>{E.get(route("admin.announce.edit",s.id),{},{preserveState:!0,replace:!0})};return(s,e)=>(d(),r(c,null,[t("div",T,[t("div",z,[e[4]||(e[4]=t("div",{class:"text-2xl font-bold"},"จัดการข่าวประกาศ",-1)),a(n($),{href:s.route("admin.announce.create"),data:{fdivision_selected:n(i).fdivision_selected},method:"get",as:"button",type:"button",class:"flex items-center px-3 py-1 text-sm font-bold text-gray-100 transition-colors duration-200 transform bg-green-900 rounded-sm cursor-pointer hover:bg-green-800"},{default:S(()=>e[3]||(e[3]=[t("div",null,[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})])],-1),t("div",null,"เพิ่ม",-1)])),_:1,__:[3]},8,["href","data"])]),t("div",H,[t("div",L,[t("div",P,[t("div",G,[t("div",J,[e[5]||(e[5]=t("label",{for:"filter_topic",class:"block text-sm font-medium text-gray-700"},"หัวข้อข่าว",-1)),u(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>n(i).ftopic=o),id:"filter_topic",placeholder:"ค้นหาจากหัวข้อข่าว",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-xs sm:text-sm border-gray-300 rounded-md"},null,512),[[B,n(i).ftopic]])]),s.$page.props.auth.abilities.includes("view_all_content")?(d(),r("div",K,[e[7]||(e[7]=t("label",{for:"division_selected",class:"block text-sm font-medium text-gray-700"},"สาขา/หน่วยงาน",-1)),u(t("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>n(i).fdivision_selected=o),id:"division_selected",class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-xs focus:outline-hidden focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},[e[6]||(e[6]=t("option",{value:"0"},"ทุกสาขา/หน่วยงาน",-1)),(d(!0),r(c,null,x(f.value,(o,m)=>(d(),r("option",{key:m,value:o.division_id},F(o.name_th),9,Q))),128))],512),[[g,n(i).fdivision_selected]])])):A("",!0),t("div",R,[e[9]||(e[9]=t("label",{for:"division_selected",class:"block text-sm font-medium text-gray-700"},"ประเภทประกาศ",-1)),u(t("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>n(i).fexpire_type=o),id:"division_selected",class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-xs focus:outline-hidden focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},e[8]||(e[8]=[t("option",{value:"all"},"ทั้งหมด",-1),t("option",{value:"alive"},"ประกาศที่ยังไม่หมดอายุเท่านั้น",-1),t("option",{value:"expire"},"ประกาศที่หมดอายุเท่านั้น",-1)]),512),[[g,n(i).fexpire_type]])])])]),t("div",W,[t("button",{type:"button",onClick:y,class:"flex items-center justify-center py-1 px-3 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-hidden focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},[a(n(U),{class:"h-6 w-6"}),e[10]||(e[10]=N(" ค้นหา ",-1))])])])]),(d(!0),r(c,null,x(l.announces.data,o=>(d(),C(I,{key:o.id,announceDetails:o,typeDetail:"list",filter:n(i),onEditAnnounce:m=>w(o)},null,8,["announceDetails","filter","onEditAnnounce"]))),128))]),t("div",X,[a(M,{pagination:l.announces},null,8,["pagination"])])],64))}}),ae=h(Z,[["__scopeId","data-v-df92f956"]]);export{ae as default};
