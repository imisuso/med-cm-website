import{s as P,o as d,c,z as O,r as x,l as E,T as I,q as Q,m as V,d as S,a as t,w as b,W as y,g as v,x as R,F as j,f as H,t as w,b as Y,u as F,v as A}from"./app-D_J6jNxv.js";import{t as D}from"./style-Cced5V6y.js";import{S as J}from"./sweetalert2-z6gKu1nJ.js";import{P as U}from"./PersonService-CEW6V2mh.js";import{B as G,d as K}from"./index-DXFaliQP.js";const X={},Z={class:"w-32 px-2 py-1 border rounded-xl shadow-lg bg-orange-400 text-gray-600 font-bold italic"};function ee(g,p){return d(),c("div",Z,"Comming Soon")}const N=P(X,[["render",ee]]),te={key:0},oe={key:1,class:"flex flex-col"},ne={class:"flex-grow"},se={class:"mt-2"},ie={class:"flex"},re={key:2,class:"flex flex-col"},le={class:"flex-grow"},ae={class:"ql-container ql-snow"},de=["innerHTML"],Ft={__name:"BtResearch",props:{division_id:{type:Number,required:!0},branchSubMenu:{type:Object,required:!0},display_content:{type:String,required:!0}},setup(g){const p=g;O(()=>{window.removeEventListener("click",a,!1)});const i=x(),s=x(!0),m=E([]),u=E([]),r=I({id:null,detail_delta:null,detail_html:null}),l=(n,e,o)=>{D({title:e,description:o},{showIcon:!0,transition:"zoom",position:"top-right",type:n,timeout:3e3})},k=n=>{const e=_(i.value.getContents().diff(n.oldContents));e.length&&m.push(e[0])&&console.log("delete",m)},_=n=>n.ops.filter(e=>e.insert&&e.insert.image).map(e=>e.insert.image),a=n=>{Array.prototype.forEach.call(n.clipboardData.items,e=>{if(e.type.match(/^image\/(gif|jpe?g|a?png|svg|webp|bmp)$/i)){n.preventDefault(),M(e.getAsFile());return}else e.type.match(/^application\//i)?n.preventDefault():e.type.startsWith("text/html")&&Q(()=>{let o=document.querySelector("#quill_ourservice .ql-editor");setTimeout(()=>{o.lastChild.scrollIntoView();let f=document.querySelector("#quill_ourservice .ql-editor").getBoundingClientRect(),L=f.top+window.scrollY+f.height;setTimeout(()=>{window.scrollTo(0,L-window.innerHeight/2)},100)},300)})})},h=()=>{i.value.getEditor().addEventListener("paste",a,!1),i.value.setContents(JSON.parse(p.branchSubMenu.detail_delta)),i.value.getQuill().enable(!1)},C=()=>{J.fire({title:"คุณต้องการจัดเก็บข้อมูล ใช่ หรือ ไม่ ?",showCancelButton:!0,confirmButtonColor:"#1e40af",cancelButtonColor:"#6b7280",confirmButtonText:"ตกลง",cancelButtonText:"ยกเลิก"}).then(n=>{if(n.isConfirmed)z();else return i.value.setContents(JSON.parse(p.branchSubMenu.detail_delta)),q(),!1})},$=()=>{i.value.getQuill().enable(!0),s.value=!1},q=()=>{u.length&&B(u),m.splice(0),u.splice(0),h(),s.value=!0},M=n=>{const e=new FormData;e.append("image_file",n),e.append("store_path","branch_content/"+p.division_id+"/images"),axios.post(route("uploading_file_api"),e,{headers:{"Content-Type":"multipart/form-data"}}).then(o=>{T(o.data.url)}).catch(o=>{o.response&&o.response.status===401&&l("warning","คำเตือน","กรุณาเลือกเฉพาะไฟล์ที่เป็นรูปภาพเท่านั้น")})},B=n=>{axios.post(route("delete_file_api"),{imgFiles:n}).then(e=>{console.log(e.data)}).catch(e=>{e.response&&e.response.status===401&&l("warning","คำเตือน","ลบไฟล์ภาพเก่าไม่สำเร็จ")})},T=n=>{let e=i.value.getQuill();const o=e.getSelection();e.insertEmbed(o.index,"image",`${n}`,"user"),u.push(n)&&console.log("insert",u)},z=()=>{r.id=p.branchSubMenu.id,r.detail_delta=JSON.stringify(i.value.getContents()),r.detail_html=i.value.getHTML(),r.patch(route("admin.update_content_branch_sub_menu",r.id),{preserveState:!1,onSuccess:()=>{l("success","สำเร็จ","จัดเก็บข้อมูลเรียบร้อย"),m.length&&B(m)},onError:n=>{let e="";for(let o in n)e=e+`- ${n[o]}<br/>`;l("danger","พบข้อผิดพลาด",e)},onFinish:()=>{r.reset(),m.splice(0),u.splice(0),s.value=!0}})};return(n,e)=>{const o=V("QuillEditor");return g.branchSubMenu?g.display_content==="template"?(d(),c("div",oe,[t("div",ne,[S(o,{ref_key:"quill_research",ref:i,theme:"snow",contentType:"delta",onReady:e[0]||(e[0]=f=>h()),onTextChange:k},null,512)]),t("div",se,[b(t("button",{onClick:$,class:"flex items-center mx-1 text-orange-500 bg-white hover:bg-orange-100 focus:ring-4 focus:ring-orange-300 rounded-lg border border-orange-200 text-sm font-medium px-5 py-2 hover:text-orange-900 focus:z-10"},e[1]||(e[1]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),v(" แก้ไข ")]),512),[[y,s.value]]),t("div",ie,[b(t("button",{onClick:C,class:"flex items-center mx-1 text-emerald-500 bg-white hover:bg-emerald-100 focus:ring-4 focus:ring-emerald-300 rounded-lg border border-emerald-200 text-sm font-medium px-5 py-2 hover:text-emerald-900 focus:z-10"},e[2]||(e[2]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1),v(" บันทึก ")]),512),[[y,!s.value]]),b(t("button",{onClick:q,class:"flex items-center mx-1 text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:ring-gray-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2 hover:text-gray-900 focus:z-10"},e[3]||(e[3]=[t("svg",{class:"h-5 w-5 text-red-500",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{stroke:"none",d:"M0 0h24v24H0z"}),v(),t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),v(),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1),v(" ยกเลิก ")]),512),[[y,!s.value]])])])])):(d(),c("div",re,[t("div",le,[t("div",ae,[t("div",{class:"ql-editor",innerHTML:g.branchSubMenu.detail_html},null,8,de)])])])):(d(),c("div",te,[S(N)]))}}},ce={key:0},ue={key:1,class:"flex flex-col border-green-200 gap-2 p-2 rounded-md mt-5"},me={class:"flex flex-shrink-0 justify-center"},ge=["src"],pe={class:"flex flex-col w-full space-y-2 mb-2 text-black"},fe={class:"w-full p-2 border border-black rounded-md sm:border-0"},he={class:"flex items-center font-bold"},ve={class:"mr-1"},_e={class:"mr-1"},xe={class:"px-1"},be={key:0,class:"flex items-center italic text-sm"},we={class:"mr-1"},Ot={__name:"BtProfessor",props:{division_id:{type:Number,required:!0},division_name:{type:String}},setup(g){const p=g;R(()=>{i.value.listProfessorByDivisionId(p.division_id).then(u=>{s.value=u})});const i=x(new U),s=x([]);x(base_url);const m=u=>JSON.parse(u).sort((r,l)=>l.cert_year-r.cert_year);return(u,r)=>s.value.length?(d(),c("div",ue,[(d(!0),c(j,null,H(s.value,l=>(d(),c("div",{key:l.id,class:"flex flex-col sm:flex-row p-2 gap-4 bg-gradient-to-r from-gray-50 to-gray-200 rounded-lg shadow-lg"},[t("div",me,[t("img",{src:`${l.image_url}`,alt:"",class:"object-cover w-28 h-36 rounded-sm"},null,8,ge)]),t("div",pe,[t("div",fe,[t("div",he,[t("div",ve,w(l.rname_short_th),1),t("div",_e,w(l.fname_th)+" "+w(l.lname_th),1),t("div",xe,w(l.reward),1)]),l.profiles.leader?(d(),c("div",be,[t("div",we,"หัวหน้าสาขาวิชา"+w(g.division_name),1)])):Y("",!0),r[1]||(r[1]=t("div",{class:"flex items-center italic text-sm"},[t("div",{class:"mr-1"},"อาจารย์")],-1)),(d(!0),c(j,null,H(m(l.cert),(k,_)=>(d(),c("div",{key:_,class:"py-1 flex items-center text-sm text-gray-600 italic"},[r[0]||(r[0]=t("div",{class:"px-2"},"-",-1)),t("div",null,w(k.cert),1)]))),128))])])]))),128))])):(d(),c("div",ce,[S(N)]))}},ye={key:0},ke={key:1,class:"flex flex-col border-green-200 gap-2 p-2 rounded-md mt-5"},Ce={class:"flex flex-shrink-0 justify-center"},$e=["src"],Se={class:"flex flex-col w-full space-y-2 mb-2 text-black"},qe={class:"w-full p-2 border border-black rounded-md sm:border-0"},Be={class:"flex items-center font-bold"},Me={class:"mr-1"},Te={class:"mr-1"},Le={class:"px-1"},Ee={class:"flex items-center italic text-sm"},ze={key:0,class:"mr-1"},je={key:1,class:"mr-1"},Qt={__name:"BtDoctor",props:{division_id:{type:Number,required:!0}},setup(g){const p=g;R(()=>{i.value.listDoctorByDivisionId(p.division_id).then(u=>{s.value=u})});const i=x(new U),s=x([]);x(base_url);const m=u=>JSON.parse(u).sort((r,l)=>l.cert_year-r.cert_year);return(u,r)=>s.value.length?(d(),c("div",ke,[(d(!0),c(j,null,H(s.value,l=>(d(),c("div",{key:l.id,class:"flex flex-col sm:flex-row p-2 gap-4 bg-gradient-to-r from-gray-50 to-gray-200 rounded-lg shadow-lg"},[t("div",Ce,[t("img",{src:`${l.image_url}`,alt:"",class:"object-cover w-28 h-36 rounded-sm"},null,8,$e)]),t("div",Se,[t("div",qe,[t("div",Be,[t("div",Me,w(l.rname_short_th),1),t("div",Te,w(l.fname_th)+" "+w(l.lname_th),1),t("div",Le,w(l.reward),1)]),t("div",Ee,[l.position_division&&l.position_division!=="NULL"?(d(),c("div",ze,w(l.position_division),1)):(d(),c("div",je,"ไม่พบข้อมูลตำแหน่งงาน"))]),(d(!0),c(j,null,H(m(l.cert),(k,_)=>(d(),c("div",{key:_,class:"py-1 flex items-center text-sm text-gray-600 italic"},[r[0]||(r[0]=t("div",{class:"px-2"},"-",-1)),t("div",null,w(k.cert),1)]))),128))])])]))),128))])):(d(),c("div",ye,[S(N)]))}},He={key:0},Ne={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 mt-4 w-full gap-1 md:gap-2"},Ie={class:"flex items-center p-2"},De=["src"],Fe={class:"flex items-center"},Oe={class:"flex flex-col"},Qe={class:"px-2"},Ve={key:0,class:"px-2 italic text-sm text-gray-600"},Je={key:1,class:"px-2 italic text-sm text-gray-600"},Vt={__name:"BtOfficer",props:{division_id:{type:Number,required:!0}},setup(g){const p=g;R(()=>{i.value.listOfficerByDivisionId(p.division_id).then(m=>{s.value=m})});const i=x(new U),s=x([]);return x(base_url),(m,u)=>s.value.length?(d(),c("div",Ne,[(d(!0),c(j,null,H(s.value,r=>(d(),c("div",{key:r.id,class:"flex flex-row mt-2 sm:mt-0 rounded-lg shadow-lg bg-gradient-to-r from-gray-50 to-gray-200"},[t("div",Ie,[t("img",{class:"object-cover w-20 h-28 rounded-lg ring-1 ring-gray-300",src:`${r.image_url}`,alt:""},null,8,De)]),t("div",Fe,[t("div",Oe,[t("div",Qe,w(r.title_th)+w(r.fname_th)+" "+w(r.lname_th),1),r.position_division&&r.position_division!=="NULL"?(d(),c("div",Ve,w(r.position_division),1)):(d(),c("div",Je,"ไม่พบข้อมูลตำแหน่งงาน"))])])]))),128))])):(d(),c("div",He,[S(N)]))}},Re={key:0},Ue={class:"col-span-6 sm:col-span-4 mb-2"},Ae={class:"flex items-center justify-start"},We={class:"flex flex-col"},Pe={class:"w-full mr-1"},Ye=["onUpdate:modelValue","readonly"],Ge={class:"w-full"},Ke=["onUpdate:modelValue","readonly"],Xe=["onClick"],Ze={class:"mt-2"},et={class:"flex"},tt={key:1},ot={class:"flex flex-col"},nt={class:"flex flex-col justify-between overflow-hidden text-left transition-shadow duration-200 group hover:shadow-2xl"},st={class:"p-1"},it={class:"flex items-center justify-center w-full h-5"},rt=["href"],Jt={__name:"BtLink",props:{division_id:{type:Number,required:!0},branchSubMenu:{type:Object,required:!0},display_content:{type:String,required:!0}},setup(g){const p=g;x(JSON.parse(p.branchSubMenu.detail_delta));const i=I({id:p.branchSubMenu.id,linkList:p.branchSubMenu.detail_delta?JSON.parse(p.branchSubMenu.detail_delta):[]}),s=x(!1),m=(_,a,h)=>{D({title:a,description:h},{showIcon:!0,transition:"zoom",position:"top-right",type:_,timeout:3e3})},u=_=>{_.push({name:""})},r=(_,a)=>{a.splice(_,1)},l=()=>{i.transform(_=>({..._,detail_delta:JSON.stringify(_.linkList),detail_html:"Template Link"})).patch(route("admin.update_content_branch_sub_menu",i.id),{_method:"patch",preserveState:!1,preserveScroll:!0,onSuccess:()=>{m("success","แก้ไขสำเร็จ","แก้ไขข้อมูลลิ้งก์ที่เกี่ยวข้อง เรียบร้อย"),i.reset()},onError:_=>{let a="";for(let h in _)a=a+`- ${_[h]}<br/>`;m("danger","พบข้อผิดพลาด",a)},onFinish:()=>{i.processing=!1}})},k=()=>{i.linkList=JSON.parse(p.branchSubMenu.detail_delta),s.value=!1};return(_,a)=>g.display_content==="template"?(d(),c("div",Re,[t("div",Ue,[t("div",Ae,[a[3]||(a[3]=t("div",{class:"text-md font-bold text-green-700"}," เพิ่มลิงก์ : ",-1)),b((d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",onClick:a[0]||(a[0]=h=>u(F(i).linkList)),class:"h-5 w-5 ml-2 cursor-pointer",viewBox:"0 0 20 20",fill:"currentColor"},a[2]||(a[2]=[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z","clip-rule":"evenodd"},null,-1)]),512)),[[y,s.value]])])]),t("div",We,[(d(!0),c(j,null,H(F(i).linkList,(h,C)=>(d(),c("div",{key:`linkInput-${C}`,class:"flex items-center shrink-0 mb-2"},[t("div",Pe,[a[4]||(a[4]=t("label",{for:"link_detail",class:"block text-sm font-medium text-gray-700"},"หัวข้อลิงก์",-1)),b(t("input",{"onUpdate:modelValue":$=>h.name=$,type:"text",readonly:!s.value,name:"",id:"link_detail",placeholder:"ใส่หัวข้อลิ้งก์ที่ต้องการ",class:"w-full border rounded-md text-sm focus:ring-indigo-500 focus:border-indigo-500 border-gray-300"},null,8,Ye),[[A,h.name]])]),t("div",Ge,[a[5]||(a[5]=t("label",{for:"link_url",class:"block text-sm font-medium text-gray-700"},"URL ของลิงก์",-1)),b(t("input",{"onUpdate:modelValue":$=>h.url=$,type:"text",readonly:!s.value,name:"",id:"link_url",placeholder:"https://simed.mahidol.ac.th",class:"w-full border rounded-md text-sm focus:ring-indigo-500 focus:border-indigo-500 border-gray-300"},null,8,Ke),[[A,h.url]])]),b((d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",onClick:$=>r(C,F(i).linkList),class:"h-5 w-5 ml-2 shrink-0 cursor-pointer",viewBox:"0 0 20 20",fill:"currentColor"},a[6]||(a[6]=[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 000 2h6a1 1 0 100-2H7z","clip-rule":"evenodd"},null,-1)]),8,Xe)),[[y,s.value]])]))),128))]),t("div",Ze,[b(t("button",{onClick:a[1]||(a[1]=h=>s.value=!s.value),class:"flex items-center mx-1 text-orange-500 bg-white hover:bg-orange-100 focus:ring-4 focus:ring-orange-300 rounded-lg border border-orange-200 text-sm font-medium px-5 py-2 hover:text-orange-900 focus:z-10"},a[7]||(a[7]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),v(" แก้ไข ")]),512),[[y,!s.value]]),t("div",et,[b(t("button",{onClick:l,class:"flex items-center mx-1 text-emerald-500 bg-white hover:bg-emerald-100 focus:ring-4 focus:ring-emerald-300 rounded-lg border border-emerald-200 text-sm font-medium px-5 py-2 hover:text-emerald-900 focus:z-10"},a[8]||(a[8]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1),v(" บันทึก ")]),512),[[y,s.value]]),b(t("button",{onClick:k,class:"flex items-center mx-1 text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:ring-gray-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2 hover:text-gray-900 focus:z-10"},a[9]||(a[9]=[t("svg",{class:"h-5 w-5 text-red-500",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{stroke:"none",d:"M0 0h24v24H0z"}),v(),t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),v(),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1),v(" ยกเลิก ")]),512),[[y,s.value]])])])])):(d(),c("div",tt,[t("div",ot,[(d(!0),c(j,null,H(F(i).linkList,(h,C)=>(d(),c("div",{key:`linkInput-${C}`,class:"flex items-center shrink-0 mb-2"},[t("div",nt,[t("div",st,[t("div",it,[a[10]||(a[10]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-2 text-green-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})],-1)),t("a",{href:h.url,target:"_blank"},w(h.name),9,rt)])]),a[11]||(a[11]=t("div",{class:"w-full h-1 ml-auto duration-300 origin-left transform scale-x-0 bg-green-700 group-hover:scale-x-100"},null,-1))])]))),128))])]))}},lt={key:0},at={key:1,class:"flex flex-col"},dt={class:"flex-grow"},ct={class:"mt-2"},ut={class:"flex"},mt={key:2,class:"flex flex-col"},gt={class:"flex-grow"},pt={class:"ql-container ql-snow"},ft=["innerHTML"],Rt={__name:"BtContact",props:{division_id:{type:Number,required:!0},branchSubMenu:{type:Object,required:!0},display_content:{type:String,required:!0}},setup(g){const p=g;O(()=>{window.removeEventListener("click",a,!1)});const i=x(),s=x(!0),m=E([]),u=E([]),r=I({id:null,detail_delta:null,detail_html:null}),l=(n,e,o)=>{D({title:e,description:o},{showIcon:!0,transition:"zoom",position:"top-right",type:n,timeout:3e3})},k=n=>{const e=_(i.value.getContents().diff(n.oldContents));e.length&&m.push(e[0])&&console.log("delete",m)},_=n=>n.ops.filter(e=>e.insert&&e.insert.image).map(e=>e.insert.image),a=n=>{Array.prototype.forEach.call(n.clipboardData.items,e=>{if(e.type.match(/^image\/(gif|jpe?g|a?png|svg|webp|bmp)$/i)){n.preventDefault(),M(e.getAsFile());return}else e.type.match(/^application\//i)?n.preventDefault():e.type.startsWith("text/html")&&Q(()=>{let o=document.querySelector("#quill_ourservice .ql-editor");setTimeout(()=>{o.lastChild.scrollIntoView();let f=document.querySelector("#quill_ourservice .ql-editor").getBoundingClientRect(),L=f.top+window.scrollY+f.height;setTimeout(()=>{window.scrollTo(0,L-window.innerHeight/2)},100)},300)})})},h=()=>{i.value.getEditor().addEventListener("paste",a,!1),i.value.setContents(JSON.parse(p.branchSubMenu.detail_delta)),i.value.getQuill().enable(!1)},C=()=>{J.fire({title:"คุณต้องการจัดเก็บข้อมูล ใช่ หรือ ไม่ ?",showCancelButton:!0,confirmButtonColor:"#1e40af",cancelButtonColor:"#6b7280",confirmButtonText:"ตกลง",cancelButtonText:"ยกเลิก"}).then(n=>{if(n.isConfirmed)z();else return i.value.setContents(JSON.parse(p.branchSubMenu.detail_delta)),q(),!1})},$=()=>{i.value.getQuill().enable(!0),s.value=!1},q=()=>{u.length&&B(u),m.splice(0),u.splice(0),h(),s.value=!0},M=n=>{const e=new FormData;e.append("image_file",n),e.append("store_path","branch_content/"+p.division_id+"/images"),axios.post(route("uploading_file_api"),e,{headers:{"Content-Type":"multipart/form-data"}}).then(o=>{T(o.data.url)}).catch(o=>{o.response&&o.response.status===401&&l("warning","คำเตือน","กรุณาเลือกเฉพาะไฟล์ที่เป็นรูปภาพเท่านั้น")})},B=n=>{axios.post(route("delete_file_api"),{imgFiles:n}).then(e=>{console.log(e.data)}).catch(e=>{e.response&&e.response.status===401&&l("warning","คำเตือน","ลบไฟล์ภาพเก่าไม่สำเร็จ")})},T=n=>{let e=i.value.getQuill();const o=e.getSelection();e.insertEmbed(o.index,"image",`${n}`,"user"),u.push(n)&&console.log("insert",u)},z=()=>{r.id=p.branchSubMenu.id,r.detail_delta=JSON.stringify(i.value.getContents()),r.detail_html=i.value.getHTML(),r.patch(route("admin.update_content_branch_sub_menu",r.id),{preserveState:!1,onSuccess:()=>{l("success","สำเร็จ","จัดเก็บข้อมูลเรียบร้อย"),m.length&&B(m)},onError:n=>{let e="";for(let o in n)e=e+`- ${n[o]}<br/>`;l("danger","พบข้อผิดพลาด",e)},onFinish:()=>{r.reset(),m.splice(0),u.splice(0),s.value=!0}})};return(n,e)=>{const o=V("QuillEditor");return g.branchSubMenu?g.display_content==="template"?(d(),c("div",at,[t("div",dt,[S(o,{ref_key:"quill_contact",ref:i,theme:"snow",contentType:"delta",onReady:e[0]||(e[0]=f=>h()),onTextChange:k},null,512)]),t("div",ct,[b(t("button",{onClick:$,class:"flex items-center mx-1 text-orange-500 bg-white hover:bg-orange-100 focus:ring-4 focus:ring-orange-300 rounded-lg border border-orange-200 text-sm font-medium px-5 py-2 hover:text-orange-900 focus:z-10"},e[1]||(e[1]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),v(" แก้ไข ")]),512),[[y,s.value]]),t("div",ut,[b(t("button",{onClick:C,class:"flex items-center mx-1 text-emerald-500 bg-white hover:bg-emerald-100 focus:ring-4 focus:ring-emerald-300 rounded-lg border border-emerald-200 text-sm font-medium px-5 py-2 hover:text-emerald-900 focus:z-10"},e[2]||(e[2]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1),v(" บันทึก ")]),512),[[y,!s.value]]),b(t("button",{onClick:q,class:"flex items-center mx-1 text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:ring-gray-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2 hover:text-gray-900 focus:z-10"},e[3]||(e[3]=[t("svg",{class:"h-5 w-5 text-red-500",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{stroke:"none",d:"M0 0h24v24H0z"}),v(),t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),v(),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1),v(" ยกเลิก ")]),512),[[y,!s.value]])])])])):(d(),c("div",mt,[t("div",gt,[t("div",pt,[t("div",{class:"ql-editor",innerHTML:g.branchSubMenu.detail_html},null,8,ft)])])])):(d(),c("div",lt,[S(N)]))}}},ht={key:0},vt={key:1,class:"flex flex-col"},_t={class:"flex-grow"},xt={class:"mt-2"},bt={class:"flex"},wt={key:2,class:"flex flex-col"},yt={class:"flex-grow"},kt={class:"ql-container ql-snow"},Ct=["innerHTML"],Ut={__name:"BtBranchService",props:{division_id:{type:Number,required:!0},branchSubMenu:{type:Object,required:!0},display_content:{type:String,required:!0}},setup(g){class p extends K.ImageSpec{getActions(){return[]}}const i=g;O(()=>{window.removeEventListener("click",h,!1)});const s=x(),m=x(!0);x(base_url),x([]);const u=E([]),r=E([]),l=I({id:null,detail_delta:null,detail_html:null});x([{name:"blotFormatter",module:G,options:{specs:[p],overlay:{style:{border:"2px solid red"}}}}]);const k=(e,o,f)=>{D({title:o,description:f},{showIcon:!0,transition:"zoom",position:"top-right",type:e,timeout:3e3})},_=e=>{const o=a(s.value.getContents().diff(e.oldContents));o.length&&u.push(o[0])&&console.log("delete",u)},a=e=>e.ops.filter(o=>o.insert&&o.insert.image).map(o=>o.insert.image),h=e=>{Array.prototype.forEach.call(e.clipboardData.items,o=>{if(o.type.match(/^image\/(gif|jpe?g|a?png|svg|webp|bmp)$/i)){e.preventDefault(),B(o.getAsFile());return}else o.type.match(/^application\//i)?e.preventDefault():o.type.startsWith("text/html")&&Q(()=>{let f=document.querySelector("#quill_ourservice .ql-editor");setTimeout(()=>{f.lastChild.scrollIntoView();let L=document.querySelector("#quill_ourservice .ql-editor").getBoundingClientRect(),W=L.top+window.scrollY+L.height;setTimeout(()=>{window.scrollTo(0,W-window.innerHeight/2)},100)},300)})})},C=()=>{s.value.getEditor().addEventListener("paste",h,!1),s.value.setContents(JSON.parse(i.branchSubMenu.detail_delta)),s.value.getQuill().enable(!1)},$=()=>{J.fire({title:"คุณต้องการจัดเก็บข้อมูล ใช่ หรือ ไม่ ?",showCancelButton:!0,confirmButtonColor:"#1e40af",cancelButtonColor:"#6b7280",confirmButtonText:"ตกลง",cancelButtonText:"ยกเลิก"}).then(e=>{if(e.isConfirmed)n();else return s.value.setContents(JSON.parse(i.branchSubMenu.detail_delta)),M(),!1})},q=()=>{s.value.getQuill().enable(!0),m.value=!1},M=()=>{r.length&&T(r),u.splice(0),r.splice(0),C(),m.value=!0},B=e=>{const o=new FormData;o.append("image_file",e),o.append("store_path","branch_content/"+i.division_id+"/images"),axios.post(route("uploading_file_api"),o,{headers:{"Content-Type":"multipart/form-data"}}).then(f=>{z(f.data.url)}).catch(f=>{f.response&&f.response.status===401&&k("warning","คำเตือน","กรุณาเลือกเฉพาะไฟล์ที่เป็นรูปภาพเท่านั้น")})},T=e=>{axios.post(route("delete_file_api"),{imgFiles:e}).then(o=>{console.log(o.data)}).catch(o=>{o.response&&o.response.status===401&&k("warning","คำเตือน","ลบไฟล์ภาพเก่าไม่สำเร็จ")})},z=e=>{let o=s.value.getQuill();const f=o.getSelection();o.insertEmbed(f.index,"image",`${e}`,"user"),r.push(e)&&console.log("insert",r)},n=()=>{l.id=i.branchSubMenu.id,l.detail_delta=JSON.stringify(s.value.getContents()),l.detail_html=s.value.getHTML(),l.patch(route("admin.update_content_branch_sub_menu",l.id),{preserveState:!1,onSuccess:()=>{k("success","สำเร็จ","จัดเก็บข้อมูลเรียบร้อย"),u.length&&T(u)},onError:e=>{let o="";for(let f in e)o=o+`- ${e[f]}<br/>`;k("danger","พบข้อผิดพลาด",o)},onFinish:()=>{l.reset(),u.splice(0),r.splice(0),m.value=!0}})};return(e,o)=>{const f=V("QuillEditor");return g.branchSubMenu?g.display_content==="template"?(d(),c("div",vt,[t("div",_t,[S(f,{id:"quill_ourservice",ref_key:"quill_ourservice",ref:s,contentType:"delta",onReady:C,onTextChange:_},null,512)]),t("div",xt,[b(t("button",{onClick:q,class:"flex items-center mx-1 text-orange-500 bg-white hover:bg-orange-100 focus:ring-4 focus:ring-orange-300 rounded-lg border border-orange-200 text-sm font-medium px-5 py-2 hover:text-orange-900 focus:z-10"},o[0]||(o[0]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),v(" แก้ไข ")]),512),[[y,m.value]]),t("div",bt,[b(t("button",{onClick:$,class:"flex items-center mx-1 text-emerald-500 bg-white hover:bg-emerald-100 focus:ring-4 focus:ring-emerald-300 rounded-lg border border-emerald-200 text-sm font-medium px-5 py-2 hover:text-emerald-900 focus:z-10"},o[1]||(o[1]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1),v(" บันทึก ")]),512),[[y,!m.value]]),b(t("button",{onClick:M,class:"flex items-center mx-1 text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:ring-gray-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2 hover:text-gray-900 focus:z-10"},o[2]||(o[2]=[t("svg",{class:"h-5 w-5 text-red-500",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{stroke:"none",d:"M0 0h24v24H0z"}),v(),t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),v(),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1),v(" ยกเลิก ")]),512),[[y,!m.value]])])])])):(d(),c("div",wt,[t("div",yt,[t("div",kt,[t("div",{class:"ql-editor",innerHTML:g.branchSubMenu.detail_html},null,8,Ct)])])])):(d(),c("div",ht,[S(N)]))}}},$t={key:0},St={key:1,class:"flex flex-col"},qt={class:"flex-grow"},Bt={class:"mt-2"},Mt={class:"flex"},Tt={key:2,class:"flex flex-col"},Lt={class:"flex-grow"},Et={class:"ql-container ql-snow"},zt=["innerHTML"],At={__name:"BtAcademicService",props:{division_id:{type:Number,required:!0},branchSubMenu:{type:Object,required:!0},display_content:{type:String,required:!0}},setup(g){const p=g;O(()=>{window.removeEventListener("click",a,!1)});const i=x(),s=x(!0),m=E([]),u=E([]),r=I({id:null,detail_delta:null,detail_html:null}),l=(n,e,o)=>{D({title:e,description:o},{showIcon:!0,transition:"zoom",position:"top-right",type:n,timeout:3e3})},k=n=>{const e=_(i.value.getContents().diff(n.oldContents));e.length&&m.push(e[0])&&console.log("delete",m)},_=n=>n.ops.filter(e=>e.insert&&e.insert.image).map(e=>e.insert.image),a=n=>{Array.prototype.forEach.call(n.clipboardData.items,e=>{if(e.type.match(/^image\/(gif|jpe?g|a?png|svg|webp|bmp)$/i)){n.preventDefault(),M(e.getAsFile());return}else e.type.match(/^application\//i)?n.preventDefault():e.type.startsWith("text/html")&&Q(()=>{let o=document.querySelector("#quill_ourservice .ql-editor");setTimeout(()=>{o.lastChild.scrollIntoView();let f=document.querySelector("#quill_ourservice .ql-editor").getBoundingClientRect(),L=f.top+window.scrollY+f.height;setTimeout(()=>{window.scrollTo(0,L-window.innerHeight/2)},100)},300)})})},h=()=>{i.value.getEditor().addEventListener("paste",a,!1),i.value.setContents(JSON.parse(p.branchSubMenu.detail_delta)),i.value.getQuill().enable(!1)},C=()=>{J.fire({title:"คุณต้องการจัดเก็บข้อมูล ใช่ หรือ ไม่ ?",showCancelButton:!0,confirmButtonColor:"#1e40af",cancelButtonColor:"#6b7280",confirmButtonText:"ตกลง",cancelButtonText:"ยกเลิก"}).then(n=>{if(n.isConfirmed)z();else return i.value.setContents(JSON.parse(p.branchSubMenu.detail_delta)),q(),!1})},$=()=>{i.value.getQuill().enable(!0),s.value=!1},q=()=>{u.length&&B(u),m.splice(0),u.splice(0),h(),s.value=!0},M=n=>{const e=new FormData;e.append("image_file",n),e.append("store_path","branch_content/"+p.division_id+"/images"),axios.post(route("uploading_file_api"),e,{headers:{"Content-Type":"multipart/form-data"}}).then(o=>{T(o.data.url)}).catch(o=>{o.response&&o.response.status===401&&l("warning","คำเตือน","กรุณาเลือกเฉพาะไฟล์ที่เป็นรูปภาพเท่านั้น")})},B=n=>{axios.post(route("delete_file_api"),{imgFiles:n}).then(e=>{console.log(e.data)}).catch(e=>{e.response&&e.response.status===401&&l("warning","คำเตือน","ลบไฟล์ภาพเก่าไม่สำเร็จ")})},T=n=>{let e=i.value.getQuill();const o=e.getSelection();e.insertEmbed(o.index,"image",`${n}`,"user"),u.push(n)&&console.log("insert",u)},z=()=>{r.id=p.branchSubMenu.id,r.detail_delta=JSON.stringify(i.value.getContents()),r.detail_html=i.value.getHTML(),r.patch(route("admin.update_content_branch_sub_menu",r.id),{preserveState:!1,onSuccess:()=>{l("success","สำเร็จ","จัดเก็บข้อมูลเรียบร้อย"),m.length&&B(m)},onError:n=>{let e="";for(let o in n)e=e+`- ${n[o]}<br/>`;l("danger","พบข้อผิดพลาด",e)},onFinish:()=>{r.reset(),m.splice(0),u.splice(0),s.value=!0}})};return(n,e)=>{const o=V("QuillEditor");return g.branchSubMenu?g.display_content==="template"?(d(),c("div",St,[t("div",qt,[S(o,{ref_key:"quill_academic_service",ref:i,theme:"snow",contentType:"delta",onReady:e[0]||(e[0]=f=>h()),onTextChange:k},null,512)]),t("div",Bt,[b(t("button",{onClick:$,class:"flex items-center mx-1 text-orange-500 bg-white hover:bg-orange-100 focus:ring-4 focus:ring-orange-300 rounded-lg border border-orange-200 text-sm font-medium px-5 py-2 hover:text-orange-900 focus:z-10"},e[1]||(e[1]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),v(" แก้ไข ")]),512),[[y,s.value]]),t("div",Mt,[b(t("button",{onClick:C,class:"flex items-center mx-1 text-emerald-500 bg-white hover:bg-emerald-100 focus:ring-4 focus:ring-emerald-300 rounded-lg border border-emerald-200 text-sm font-medium px-5 py-2 hover:text-emerald-900 focus:z-10"},e[2]||(e[2]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1),v(" บันทึก ")]),512),[[y,!s.value]]),b(t("button",{onClick:q,class:"flex items-center mx-1 text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:ring-gray-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2 hover:text-gray-900 focus:z-10"},e[3]||(e[3]=[t("svg",{class:"h-5 w-5 text-red-500",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{stroke:"none",d:"M0 0h24v24H0z"}),v(),t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),v(),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1),v(" ยกเลิก ")]),512),[[y,!s.value]])])])])):(d(),c("div",Tt,[t("div",Lt,[t("div",Et,[t("div",{class:"ql-editor",innerHTML:g.branchSubMenu.detail_html},null,8,zt)])])])):(d(),c("div",$t,[S(N)]))}}};export{Ot as _,Qt as a,Vt as b,Ft as c,Ut as d,At as e,Jt as f,Rt as g};
