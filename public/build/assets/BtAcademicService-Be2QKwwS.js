import{x as W,c as d,o as c,A as F,r as _,k as B,u as D,s as Q,m as V,e as M,a as t,w as x,W as w,g as v,y as R,F as j,h as H,d as P,t as b,b as O,v as A}from"./app-DgvnGo_H.js";import{t as I}from"./style-B4-viUW5.js";import{S as J}from"./sweetalert2-z6gKu1nJ.js";import{P as U}from"./PersonService-CkWkrtgp.js";const Y={},G={class:"w-32 px-2 py-1 border rounded-xl shadow-lg bg-orange-400 text-gray-600 font-bold italic"};function K(p,g){return c(),d("div",G,"Comming Soon")}const N=W(Y,[["render",K]]),X={key:0},Z={key:1,class:"flex flex-col"},ee={class:"grow"},te={class:"mt-2"},oe={class:"flex"},ne={key:2,class:"flex flex-col"},se={class:"grow"},ie={class:"ql-container ql-snow"},re=["innerHTML"],Ht={__name:"BtResearch",props:{division_id:{type:Number,required:!0},branchSubMenu:{type:Object,required:!0},display_content:{type:String,required:!0}},setup(p){const g=p;F(()=>{window.removeEventListener("click",a,!1)});const n=_(),i=_(!0),m=B([]),u=B([]),r=D({id:null,detail_delta:null,detail_html:null}),l=(o,e,s)=>{I({title:e,description:s},{showIcon:!0,transition:"zoom",position:"top-right",type:o,timeout:3e3})},k=o=>{const e=f(n.value.getContents().diff(o.oldContents));e.length&&m.push(e[0])&&console.log("delete",m)},f=o=>o.ops.filter(e=>e.insert&&e.insert.image).map(e=>e.insert.image),a=o=>{Array.prototype.forEach.call(o.clipboardData.items,e=>{if(e.type.match(/^image\/(gif|jpe?g|a?png|svg|webp|bmp)$/i)){o.preventDefault(),T(e.getAsFile());return}else e.type.match(/^application\//i)?o.preventDefault():e.type.startsWith("text/html")&&Q(()=>{let s=document.querySelector("#quill_ourservice .ql-editor");setTimeout(()=>{s.lastChild.scrollIntoView();let y=document.querySelector("#quill_ourservice .ql-editor").getBoundingClientRect(),z=y.top+window.scrollY+y.height;setTimeout(()=>{window.scrollTo(0,z-window.innerHeight/2)},100)},300)})})},h=()=>{n.value.getEditor().addEventListener("paste",a,!1),n.value.setContents(JSON.parse(g.branchSubMenu.detail_delta)),n.value.getQuill().enable(!1)},C=()=>{J.fire({title:"คุณต้องการจัดเก็บข้อมูล ใช่ หรือ ไม่ ?",showCancelButton:!0,confirmButtonColor:"#1e40af",cancelButtonColor:"#6b7280",confirmButtonText:"ตกลง",cancelButtonText:"ยกเลิก"}).then(o=>{if(o.isConfirmed)E();else return n.value.setContents(JSON.parse(g.branchSubMenu.detail_delta)),S(),!1})},$=()=>{n.value.getQuill().enable(!0),i.value=!1},S=()=>{u.length&&q(u),m.splice(0),u.splice(0),h(),i.value=!0},T=o=>{const e=new FormData;e.append("image_file",o),e.append("store_path","branch_content/"+g.division_id+"/images"),axios.post(route("uploading_file_api"),e,{headers:{"Content-Type":"multipart/form-data"}}).then(s=>{L(s.data.url)}).catch(s=>{s.response&&s.response.status===401&&l("warning","คำเตือน","กรุณาเลือกเฉพาะไฟล์ที่เป็นรูปภาพเท่านั้น")})},q=o=>{axios.post(route("delete_file_api"),{imgFiles:o}).then(e=>{console.log(e.data)}).catch(e=>{e.response&&e.response.status===401&&l("warning","คำเตือน","ลบไฟล์ภาพเก่าไม่สำเร็จ")})},L=o=>{let e=n.value.getQuill();const s=e.getSelection();e.insertEmbed(s.index,"image",`${o}`,"user"),u.push(o)&&console.log("insert",u)},E=()=>{r.id=g.branchSubMenu.id,r.detail_delta=JSON.stringify(n.value.getContents()),r.detail_html=n.value.getHTML(),r.patch(route("admin.update_content_branch_sub_menu",r.id),{preserveState:!1,onSuccess:()=>{l("success","สำเร็จ","จัดเก็บข้อมูลเรียบร้อย"),m.length&&q(m)},onError:o=>{let e="";for(let s in o)e=e+`- ${o[s]}<br/>`;l("danger","พบข้อผิดพลาด",e)},onFinish:()=>{r.reset(),m.splice(0),u.splice(0),i.value=!0}})};return(o,e)=>{const s=V("QuillEditor");return p.branchSubMenu?p.display_content==="template"?(c(),d("div",Z,[t("div",ee,[M(s,{ref_key:"quill_research",ref:n,theme:"snow",contentType:"delta",onReady:e[0]||(e[0]=y=>h()),onTextChange:k},null,512)]),t("div",te,[x(t("button",{onClick:$,class:"flex items-center mx-1 text-orange-500 bg-white hover:bg-orange-100 focus:ring-4 focus:ring-orange-300 rounded-lg border border-orange-200 text-sm font-medium px-5 py-2 hover:text-orange-900 focus:z-10"},e[1]||(e[1]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),v(" แก้ไข ",-1)]),512),[[w,i.value]]),t("div",oe,[x(t("button",{onClick:C,class:"flex items-center mx-1 text-emerald-500 bg-white hover:bg-emerald-100 focus:ring-4 focus:ring-emerald-300 rounded-lg border border-emerald-200 text-sm font-medium px-5 py-2 hover:text-emerald-900 focus:z-10"},e[2]||(e[2]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1),v(" บันทึก ",-1)]),512),[[w,!i.value]]),x(t("button",{onClick:S,class:"flex items-center mx-1 text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:ring-gray-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2 hover:text-gray-900 focus:z-10"},e[3]||(e[3]=[t("svg",{class:"h-5 w-5 text-red-500",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{stroke:"none",d:"M0 0h24v24H0z"}),v(),t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),v(),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1),v(" ยกเลิก ",-1)]),512),[[w,!i.value]])])])])):(c(),d("div",ne,[t("div",se,[t("div",ie,[t("div",{class:"ql-editor",innerHTML:p.branchSubMenu.detail_html},null,8,re)])])])):(c(),d("div",X,[M(N)]))}}},le={key:0},ae={key:1,class:"flex flex-col border-green-200 gap-2 p-2 rounded-md mt-5"},de={class:"flex shrink-0 justify-center"},ce=["src"],ue={class:"flex flex-col w-full space-y-2 mb-2 text-black"},me={class:"w-full p-2 border border-black rounded-md sm:border-0"},ge={class:"flex items-center font-bold"},pe={class:"mr-1"},he={class:"mr-1"},ve={class:"px-1"},fe={key:0,class:"flex items-center italic text-sm"},_e={class:"mr-1"},Nt={__name:"BtProfessor",props:{division_id:{type:Number,required:!0},division_name:{type:String}},setup(p){const g=p;R(()=>{n.value.listProfessorByDivisionId(g.division_id).then(u=>{i.value=u})});const n=_(new U),i=_([]);_(base_url);const m=u=>JSON.parse(u).sort((r,l)=>l.cert_year-r.cert_year);return(u,r)=>i.value.length?(c(),d("div",ae,[(c(!0),d(j,null,H(i.value,l=>(c(),d("div",{key:l.id,class:"flex flex-col sm:flex-row p-2 gap-4 bg-linear-to-r from-gray-50 to-gray-200 rounded-lg shadow-lg"},[t("div",de,[t("img",{src:`${l.image_url}`,alt:"",class:"object-cover w-28 h-36 rounded-sm"},null,8,ce)]),t("div",ue,[t("div",me,[t("div",ge,[t("div",pe,b(l.rname_short_th),1),t("div",he,b(l.fname_th)+" "+b(l.lname_th),1),t("div",ve,b(l.reward),1)]),l.profiles.leader?(c(),d("div",fe,[t("div",_e,"หัวหน้าสาขาวิชา"+b(p.division_name),1)])):P("",!0),r[1]||(r[1]=t("div",{class:"flex items-center italic text-sm"},[t("div",{class:"mr-1"},"อาจารย์")],-1)),(c(!0),d(j,null,H(m(l.cert),(k,f)=>(c(),d("div",{key:f,class:"py-1 flex items-center text-sm text-gray-600 italic"},[r[0]||(r[0]=t("div",{class:"px-2"},"-",-1)),t("div",null,b(k.cert),1)]))),128))])])]))),128))])):(c(),d("div",le,[M(N)]))}},xe={key:0},be={key:1,class:"flex flex-col border-green-200 gap-2 p-2 rounded-md mt-5"},we={class:"flex shrink-0 justify-center"},ye=["src"],ke={class:"flex flex-col w-full space-y-2 mb-2 text-black"},Ce={class:"w-full p-2 border border-black rounded-md sm:border-0"},$e={class:"flex items-center font-bold"},Se={class:"mr-1"},qe={class:"mr-1"},Me={class:"px-1"},Be={class:"flex items-center italic text-sm"},Te={key:0,class:"mr-1"},Le={key:1,class:"mr-1"},Dt={__name:"BtDoctor",props:{division_id:{type:Number,required:!0}},setup(p){const g=p;R(()=>{n.value.listDoctorByDivisionId(g.division_id).then(u=>{i.value=u})});const n=_(new U),i=_([]);_(base_url);const m=u=>JSON.parse(u).sort((r,l)=>l.cert_year-r.cert_year);return(u,r)=>i.value.length?(c(),d("div",be,[(c(!0),d(j,null,H(i.value,l=>(c(),d("div",{key:l.id,class:"flex flex-col sm:flex-row p-2 gap-4 bg-linear-to-r from-gray-50 to-gray-200 rounded-lg shadow-lg"},[t("div",we,[t("img",{src:`${l.image_url}`,alt:"",class:"object-cover w-28 h-36 rounded-sm"},null,8,ye)]),t("div",ke,[t("div",Ce,[t("div",$e,[t("div",Se,b(l.rname_short_th),1),t("div",qe,b(l.fname_th)+" "+b(l.lname_th),1),t("div",Me,b(l.reward),1)]),t("div",Be,[l.position_division&&l.position_division!=="NULL"?(c(),d("div",Te,b(l.position_division),1)):(c(),d("div",Le,"ไม่พบข้อมูลตำแหน่งงาน"))]),(c(!0),d(j,null,H(m(l.cert),(k,f)=>(c(),d("div",{key:f,class:"py-1 flex items-center text-sm text-gray-600 italic"},[r[0]||(r[0]=t("div",{class:"px-2"},"-",-1)),t("div",null,b(k.cert),1)]))),128))])])]))),128))])):(c(),d("div",xe,[M(N)]))}},Ee={key:0},ze={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 mt-4 w-full gap-1 md:gap-2"},je={class:"flex items-center p-2"},He=["src"],Ne={class:"flex items-center"},De={class:"flex flex-col"},Ie={class:"px-2"},Oe={key:0,class:"px-2 italic text-sm text-gray-600"},Fe={key:1,class:"px-2 italic text-sm text-gray-600"},It={__name:"BtOfficer",props:{division_id:{type:Number,required:!0}},setup(p){const g=p;R(()=>{n.value.listOfficerByDivisionId(g.division_id).then(m=>{i.value=m})});const n=_(new U),i=_([]);return _(base_url),(m,u)=>i.value.length?(c(),d("div",ze,[(c(!0),d(j,null,H(i.value,r=>(c(),d("div",{key:r.id,class:"flex flex-row mt-2 sm:mt-0 rounded-lg shadow-lg bg-linear-to-r from-gray-50 to-gray-200"},[t("div",je,[t("img",{class:"object-cover w-20 h-28 rounded-lg ring-1 ring-gray-300",src:`${r.image_url}`,alt:""},null,8,He)]),t("div",Ne,[t("div",De,[t("div",Ie,b(r.title_th)+b(r.fname_th)+" "+b(r.lname_th),1),r.position_division&&r.position_division!=="NULL"?(c(),d("div",Oe,b(r.position_division),1)):(c(),d("div",Fe,"ไม่พบข้อมูลตำแหน่งงาน"))])])]))),128))])):(c(),d("div",Ee,[M(N)]))}},Qe={key:0},Ve={class:"col-span-6 sm:col-span-4 mb-2"},Je={class:"flex items-center justify-start"},Re={class:"flex flex-col"},Ue={class:"w-full mr-1"},Ae=["onUpdate:modelValue","readonly"],We={class:"w-full"},Pe=["onUpdate:modelValue","readonly"],Ye=["onClick"],Ge={class:"mt-2"},Ke={class:"flex"},Xe={key:1},Ze={class:"flex flex-col"},et={class:"flex flex-col justify-between overflow-hidden text-left transition-shadow duration-200 group hover:shadow-2xl"},tt={class:"p-1"},ot={class:"flex items-center justify-center w-full h-5"},nt=["href"],Ot={__name:"BtLink",props:{division_id:{type:Number,required:!0},branchSubMenu:{type:Object,required:!0},display_content:{type:String,required:!0}},setup(p){const g=p;_(JSON.parse(g.branchSubMenu.detail_delta));const n=D({id:g.branchSubMenu.id,linkList:g.branchSubMenu.detail_delta?JSON.parse(g.branchSubMenu.detail_delta):[]}),i=_(!1),m=(f,a,h)=>{I({title:a,description:h},{showIcon:!0,transition:"zoom",position:"top-right",type:f,timeout:3e3})},u=f=>{f.push({name:""})},r=(f,a)=>{a.splice(f,1)},l=()=>{n.transform(f=>({...f,detail_delta:JSON.stringify(f.linkList),detail_html:"Template Link"})).patch(route("admin.update_content_branch_sub_menu",n.id),{_method:"patch",preserveState:!1,preserveScroll:!0,onSuccess:()=>{m("success","แก้ไขสำเร็จ","แก้ไขข้อมูลลิ้งก์ที่เกี่ยวข้อง เรียบร้อย"),n.reset()},onError:f=>{let a="";for(let h in f)a=a+`- ${f[h]}<br/>`;m("danger","พบข้อผิดพลาด",a)},onFinish:()=>{n.processing=!1}})},k=()=>{n.linkList=JSON.parse(g.branchSubMenu.detail_delta),i.value=!1};return(f,a)=>p.display_content==="template"?(c(),d("div",Qe,[t("div",Ve,[t("div",Je,[a[3]||(a[3]=t("div",{class:"text-md font-bold text-green-700"}," เพิ่มลิงก์ : ",-1)),x((c(),d("svg",{xmlns:"http://www.w3.org/2000/svg",onClick:a[0]||(a[0]=h=>u(O(n).linkList)),class:"h-5 w-5 ml-2 cursor-pointer",viewBox:"0 0 20 20",fill:"currentColor"},a[2]||(a[2]=[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z","clip-rule":"evenodd"},null,-1)]),512)),[[w,i.value]])])]),t("div",Re,[(c(!0),d(j,null,H(O(n).linkList,(h,C)=>(c(),d("div",{key:`linkInput-${C}`,class:"flex items-center shrink-0 mb-2"},[t("div",Ue,[a[4]||(a[4]=t("label",{for:"link_detail",class:"block text-sm font-medium text-gray-700"},"หัวข้อลิงก์",-1)),x(t("input",{"onUpdate:modelValue":$=>h.name=$,type:"text",readonly:!i.value,name:"",id:"link_detail",placeholder:"ใส่หัวข้อลิ้งก์ที่ต้องการ",class:"w-full border rounded-md text-sm focus:ring-indigo-500 focus:border-indigo-500 border-gray-300"},null,8,Ae),[[A,h.name]])]),t("div",We,[a[5]||(a[5]=t("label",{for:"link_url",class:"block text-sm font-medium text-gray-700"},"URL ของลิงก์",-1)),x(t("input",{"onUpdate:modelValue":$=>h.url=$,type:"text",readonly:!i.value,name:"",id:"link_url",placeholder:"https://simed.mahidol.ac.th",class:"w-full border rounded-md text-sm focus:ring-indigo-500 focus:border-indigo-500 border-gray-300"},null,8,Pe),[[A,h.url]])]),x((c(),d("svg",{xmlns:"http://www.w3.org/2000/svg",onClick:$=>r(C,O(n).linkList),class:"h-5 w-5 ml-2 shrink-0 cursor-pointer",viewBox:"0 0 20 20",fill:"currentColor"},a[6]||(a[6]=[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 000 2h6a1 1 0 100-2H7z","clip-rule":"evenodd"},null,-1)]),8,Ye)),[[w,i.value]])]))),128))]),t("div",Ge,[x(t("button",{onClick:a[1]||(a[1]=h=>i.value=!i.value),class:"flex items-center mx-1 text-orange-500 bg-white hover:bg-orange-100 focus:ring-4 focus:ring-orange-300 rounded-lg border border-orange-200 text-sm font-medium px-5 py-2 hover:text-orange-900 focus:z-10"},a[7]||(a[7]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),v(" แก้ไข ",-1)]),512),[[w,!i.value]]),t("div",Ke,[x(t("button",{onClick:l,class:"flex items-center mx-1 text-emerald-500 bg-white hover:bg-emerald-100 focus:ring-4 focus:ring-emerald-300 rounded-lg border border-emerald-200 text-sm font-medium px-5 py-2 hover:text-emerald-900 focus:z-10"},a[8]||(a[8]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1),v(" บันทึก ",-1)]),512),[[w,i.value]]),x(t("button",{onClick:k,class:"flex items-center mx-1 text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:ring-gray-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2 hover:text-gray-900 focus:z-10"},a[9]||(a[9]=[t("svg",{class:"h-5 w-5 text-red-500",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{stroke:"none",d:"M0 0h24v24H0z"}),v(),t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),v(),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1),v(" ยกเลิก ",-1)]),512),[[w,i.value]])])])])):(c(),d("div",Xe,[t("div",Ze,[(c(!0),d(j,null,H(O(n).linkList,(h,C)=>(c(),d("div",{key:`linkInput-${C}`,class:"flex items-center shrink-0 mb-2"},[t("div",et,[t("div",tt,[t("div",ot,[a[10]||(a[10]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-2 text-green-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})],-1)),t("a",{href:h.url,target:"_blank"},b(h.name),9,nt)])]),a[11]||(a[11]=t("div",{class:"w-full h-1 ml-auto duration-300 origin-left transform scale-x-0 bg-green-700 group-hover:scale-x-100"},null,-1))])]))),128))])]))}},st={key:0},it={key:1,class:"flex flex-col"},rt={class:"grow"},lt={class:"mt-2"},at={class:"flex"},dt={key:2,class:"flex flex-col"},ct={class:"grow"},ut={class:"ql-container ql-snow"},mt=["innerHTML"],Ft={__name:"BtContact",props:{division_id:{type:Number,required:!0},branchSubMenu:{type:Object,required:!0},display_content:{type:String,required:!0}},setup(p){const g=p;F(()=>{window.removeEventListener("click",a,!1)});const n=_(),i=_(!0),m=B([]),u=B([]),r=D({id:null,detail_delta:null,detail_html:null}),l=(o,e,s)=>{I({title:e,description:s},{showIcon:!0,transition:"zoom",position:"top-right",type:o,timeout:3e3})},k=o=>{const e=f(n.value.getContents().diff(o.oldContents));e.length&&m.push(e[0])&&console.log("delete",m)},f=o=>o.ops.filter(e=>e.insert&&e.insert.image).map(e=>e.insert.image),a=o=>{Array.prototype.forEach.call(o.clipboardData.items,e=>{if(e.type.match(/^image\/(gif|jpe?g|a?png|svg|webp|bmp)$/i)){o.preventDefault(),T(e.getAsFile());return}else e.type.match(/^application\//i)?o.preventDefault():e.type.startsWith("text/html")&&Q(()=>{let s=document.querySelector("#quill_ourservice .ql-editor");setTimeout(()=>{s.lastChild.scrollIntoView();let y=document.querySelector("#quill_ourservice .ql-editor").getBoundingClientRect(),z=y.top+window.scrollY+y.height;setTimeout(()=>{window.scrollTo(0,z-window.innerHeight/2)},100)},300)})})},h=()=>{n.value.getEditor().addEventListener("paste",a,!1),n.value.setContents(JSON.parse(g.branchSubMenu.detail_delta)),n.value.getQuill().enable(!1)},C=()=>{J.fire({title:"คุณต้องการจัดเก็บข้อมูล ใช่ หรือ ไม่ ?",showCancelButton:!0,confirmButtonColor:"#1e40af",cancelButtonColor:"#6b7280",confirmButtonText:"ตกลง",cancelButtonText:"ยกเลิก"}).then(o=>{if(o.isConfirmed)E();else return n.value.setContents(JSON.parse(g.branchSubMenu.detail_delta)),S(),!1})},$=()=>{n.value.getQuill().enable(!0),i.value=!1},S=()=>{u.length&&q(u),m.splice(0),u.splice(0),h(),i.value=!0},T=o=>{const e=new FormData;e.append("image_file",o),e.append("store_path","branch_content/"+g.division_id+"/images"),axios.post(route("uploading_file_api"),e,{headers:{"Content-Type":"multipart/form-data"}}).then(s=>{L(s.data.url)}).catch(s=>{s.response&&s.response.status===401&&l("warning","คำเตือน","กรุณาเลือกเฉพาะไฟล์ที่เป็นรูปภาพเท่านั้น")})},q=o=>{axios.post(route("delete_file_api"),{imgFiles:o}).then(e=>{console.log(e.data)}).catch(e=>{e.response&&e.response.status===401&&l("warning","คำเตือน","ลบไฟล์ภาพเก่าไม่สำเร็จ")})},L=o=>{let e=n.value.getQuill();const s=e.getSelection();e.insertEmbed(s.index,"image",`${o}`,"user"),u.push(o)&&console.log("insert",u)},E=()=>{r.id=g.branchSubMenu.id,r.detail_delta=JSON.stringify(n.value.getContents()),r.detail_html=n.value.getHTML(),r.patch(route("admin.update_content_branch_sub_menu",r.id),{preserveState:!1,onSuccess:()=>{l("success","สำเร็จ","จัดเก็บข้อมูลเรียบร้อย"),m.length&&q(m)},onError:o=>{let e="";for(let s in o)e=e+`- ${o[s]}<br/>`;l("danger","พบข้อผิดพลาด",e)},onFinish:()=>{r.reset(),m.splice(0),u.splice(0),i.value=!0}})};return(o,e)=>{const s=V("QuillEditor");return p.branchSubMenu?p.display_content==="template"?(c(),d("div",it,[t("div",rt,[M(s,{ref_key:"quill_contact",ref:n,theme:"snow",contentType:"delta",onReady:e[0]||(e[0]=y=>h()),onTextChange:k},null,512)]),t("div",lt,[x(t("button",{onClick:$,class:"flex items-center mx-1 text-orange-500 bg-white hover:bg-orange-100 focus:ring-4 focus:ring-orange-300 rounded-lg border border-orange-200 text-sm font-medium px-5 py-2 hover:text-orange-900 focus:z-10"},e[1]||(e[1]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),v(" แก้ไข ",-1)]),512),[[w,i.value]]),t("div",at,[x(t("button",{onClick:C,class:"flex items-center mx-1 text-emerald-500 bg-white hover:bg-emerald-100 focus:ring-4 focus:ring-emerald-300 rounded-lg border border-emerald-200 text-sm font-medium px-5 py-2 hover:text-emerald-900 focus:z-10"},e[2]||(e[2]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1),v(" บันทึก ",-1)]),512),[[w,!i.value]]),x(t("button",{onClick:S,class:"flex items-center mx-1 text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:ring-gray-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2 hover:text-gray-900 focus:z-10"},e[3]||(e[3]=[t("svg",{class:"h-5 w-5 text-red-500",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{stroke:"none",d:"M0 0h24v24H0z"}),v(),t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),v(),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1),v(" ยกเลิก ",-1)]),512),[[w,!i.value]])])])])):(c(),d("div",dt,[t("div",ct,[t("div",ut,[t("div",{class:"ql-editor",innerHTML:p.branchSubMenu.detail_html},null,8,mt)])])])):(c(),d("div",st,[M(N)]))}}},gt={key:0},pt={key:1,class:"flex flex-col"},ht={class:"grow"},vt={class:"mt-2"},ft={class:"flex"},_t={key:2,class:"flex flex-col"},xt={class:"grow"},bt={class:"ql-container ql-snow"},wt=["innerHTML"],Qt={__name:"BtBranchService",props:{division_id:{type:Number,required:!0},branchSubMenu:{type:Object,required:!0},display_content:{type:String,required:!0}},setup(p){const g=p;F(()=>{window.removeEventListener("click",a,!1)});const n=_(),i=_(!0);_(base_url),_([]);const m=B([]),u=B([]),r=D({id:null,detail_delta:null,detail_html:null});_([{}]);const l=(o,e,s)=>{I({title:e,description:s},{showIcon:!0,transition:"zoom",position:"top-right",type:o,timeout:3e3})},k=o=>{const e=f(n.value.getContents().diff(o.oldContents));e.length&&m.push(e[0])&&console.log("delete",m)},f=o=>o.ops.filter(e=>e.insert&&e.insert.image).map(e=>e.insert.image),a=o=>{Array.prototype.forEach.call(o.clipboardData.items,e=>{if(e.type.match(/^image\/(gif|jpe?g|a?png|svg|webp|bmp)$/i)){o.preventDefault(),T(e.getAsFile());return}else e.type.match(/^application\//i)?o.preventDefault():e.type.startsWith("text/html")&&Q(()=>{let s=document.querySelector("#quill_ourservice .ql-editor");setTimeout(()=>{s.lastChild.scrollIntoView();let y=document.querySelector("#quill_ourservice .ql-editor").getBoundingClientRect(),z=y.top+window.scrollY+y.height;setTimeout(()=>{window.scrollTo(0,z-window.innerHeight/2)},100)},300)})})},h=()=>{n.value.getEditor().addEventListener("paste",a,!1),n.value.setContents(JSON.parse(g.branchSubMenu.detail_delta)),n.value.getQuill().enable(!1)},C=()=>{J.fire({title:"คุณต้องการจัดเก็บข้อมูล ใช่ หรือ ไม่ ?",showCancelButton:!0,confirmButtonColor:"#1e40af",cancelButtonColor:"#6b7280",confirmButtonText:"ตกลง",cancelButtonText:"ยกเลิก"}).then(o=>{if(o.isConfirmed)E();else return n.value.setContents(JSON.parse(g.branchSubMenu.detail_delta)),S(),!1})},$=()=>{n.value.getQuill().enable(!0),i.value=!1},S=()=>{u.length&&q(u),m.splice(0),u.splice(0),h(),i.value=!0},T=o=>{const e=new FormData;e.append("image_file",o),e.append("store_path","branch_content/"+g.division_id+"/images"),axios.post(route("uploading_file_api"),e,{headers:{"Content-Type":"multipart/form-data"}}).then(s=>{L(s.data.url)}).catch(s=>{s.response&&s.response.status===401&&l("warning","คำเตือน","กรุณาเลือกเฉพาะไฟล์ที่เป็นรูปภาพเท่านั้น")})},q=o=>{axios.post(route("delete_file_api"),{imgFiles:o}).then(e=>{console.log(e.data)}).catch(e=>{e.response&&e.response.status===401&&l("warning","คำเตือน","ลบไฟล์ภาพเก่าไม่สำเร็จ")})},L=o=>{let e=n.value.getQuill();const s=e.getSelection();e.insertEmbed(s.index,"image",`${o}`,"user"),u.push(o)&&console.log("insert",u)},E=()=>{r.id=g.branchSubMenu.id,r.detail_delta=JSON.stringify(n.value.getContents()),r.detail_html=n.value.getHTML(),r.patch(route("admin.update_content_branch_sub_menu",r.id),{preserveState:!1,onSuccess:()=>{l("success","สำเร็จ","จัดเก็บข้อมูลเรียบร้อย"),m.length&&q(m)},onError:o=>{let e="";for(let s in o)e=e+`- ${o[s]}<br/>`;l("danger","พบข้อผิดพลาด",e)},onFinish:()=>{r.reset(),m.splice(0),u.splice(0),i.value=!0}})};return(o,e)=>{const s=V("QuillEditor");return p.branchSubMenu?p.display_content==="template"?(c(),d("div",pt,[t("div",ht,[M(s,{id:"quill_ourservice",ref_key:"quill_ourservice",ref:n,contentType:"delta",onReady:h,onTextChange:k},null,512)]),t("div",vt,[x(t("button",{onClick:$,class:"flex items-center mx-1 text-orange-500 bg-white hover:bg-orange-100 focus:ring-4 focus:ring-orange-300 rounded-lg border border-orange-200 text-sm font-medium px-5 py-2 hover:text-orange-900 focus:z-10"},e[0]||(e[0]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),v(" แก้ไข ",-1)]),512),[[w,i.value]]),t("div",ft,[x(t("button",{onClick:C,class:"flex items-center mx-1 text-emerald-500 bg-white hover:bg-emerald-100 focus:ring-4 focus:ring-emerald-300 rounded-lg border border-emerald-200 text-sm font-medium px-5 py-2 hover:text-emerald-900 focus:z-10"},e[1]||(e[1]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1),v(" บันทึก ",-1)]),512),[[w,!i.value]]),x(t("button",{onClick:S,class:"flex items-center mx-1 text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:ring-gray-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2 hover:text-gray-900 focus:z-10"},e[2]||(e[2]=[t("svg",{class:"h-5 w-5 text-red-500",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{stroke:"none",d:"M0 0h24v24H0z"}),v(),t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),v(),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1),v(" ยกเลิก ",-1)]),512),[[w,!i.value]])])])])):(c(),d("div",_t,[t("div",xt,[t("div",bt,[t("div",{class:"ql-editor",innerHTML:p.branchSubMenu.detail_html},null,8,wt)])])])):(c(),d("div",gt,[M(N)]))}}},yt={key:0},kt={key:1,class:"flex flex-col"},Ct={class:"grow"},$t={class:"mt-2"},St={class:"flex"},qt={key:2,class:"flex flex-col"},Mt={class:"grow"},Bt={class:"ql-container ql-snow"},Tt=["innerHTML"],Vt={__name:"BtAcademicService",props:{division_id:{type:Number,required:!0},branchSubMenu:{type:Object,required:!0},display_content:{type:String,required:!0}},setup(p){const g=p;F(()=>{window.removeEventListener("click",a,!1)});const n=_(),i=_(!0),m=B([]),u=B([]),r=D({id:null,detail_delta:null,detail_html:null}),l=(o,e,s)=>{I({title:e,description:s},{showIcon:!0,transition:"zoom",position:"top-right",type:o,timeout:3e3})},k=o=>{const e=f(n.value.getContents().diff(o.oldContents));e.length&&m.push(e[0])&&console.log("delete",m)},f=o=>o.ops.filter(e=>e.insert&&e.insert.image).map(e=>e.insert.image),a=o=>{Array.prototype.forEach.call(o.clipboardData.items,e=>{if(e.type.match(/^image\/(gif|jpe?g|a?png|svg|webp|bmp)$/i)){o.preventDefault(),T(e.getAsFile());return}else e.type.match(/^application\//i)?o.preventDefault():e.type.startsWith("text/html")&&Q(()=>{let s=document.querySelector("#quill_ourservice .ql-editor");setTimeout(()=>{s.lastChild.scrollIntoView();let y=document.querySelector("#quill_ourservice .ql-editor").getBoundingClientRect(),z=y.top+window.scrollY+y.height;setTimeout(()=>{window.scrollTo(0,z-window.innerHeight/2)},100)},300)})})},h=()=>{n.value.getEditor().addEventListener("paste",a,!1),n.value.setContents(JSON.parse(g.branchSubMenu.detail_delta)),n.value.getQuill().enable(!1)},C=()=>{J.fire({title:"คุณต้องการจัดเก็บข้อมูล ใช่ หรือ ไม่ ?",showCancelButton:!0,confirmButtonColor:"#1e40af",cancelButtonColor:"#6b7280",confirmButtonText:"ตกลง",cancelButtonText:"ยกเลิก"}).then(o=>{if(o.isConfirmed)E();else return n.value.setContents(JSON.parse(g.branchSubMenu.detail_delta)),S(),!1})},$=()=>{n.value.getQuill().enable(!0),i.value=!1},S=()=>{u.length&&q(u),m.splice(0),u.splice(0),h(),i.value=!0},T=o=>{const e=new FormData;e.append("image_file",o),e.append("store_path","branch_content/"+g.division_id+"/images"),axios.post(route("uploading_file_api"),e,{headers:{"Content-Type":"multipart/form-data"}}).then(s=>{L(s.data.url)}).catch(s=>{s.response&&s.response.status===401&&l("warning","คำเตือน","กรุณาเลือกเฉพาะไฟล์ที่เป็นรูปภาพเท่านั้น")})},q=o=>{axios.post(route("delete_file_api"),{imgFiles:o}).then(e=>{console.log(e.data)}).catch(e=>{e.response&&e.response.status===401&&l("warning","คำเตือน","ลบไฟล์ภาพเก่าไม่สำเร็จ")})},L=o=>{let e=n.value.getQuill();const s=e.getSelection();e.insertEmbed(s.index,"image",`${o}`,"user"),u.push(o)&&console.log("insert",u)},E=()=>{r.id=g.branchSubMenu.id,r.detail_delta=JSON.stringify(n.value.getContents()),r.detail_html=n.value.getHTML(),r.patch(route("admin.update_content_branch_sub_menu",r.id),{preserveState:!1,onSuccess:()=>{l("success","สำเร็จ","จัดเก็บข้อมูลเรียบร้อย"),m.length&&q(m)},onError:o=>{let e="";for(let s in o)e=e+`- ${o[s]}<br/>`;l("danger","พบข้อผิดพลาด",e)},onFinish:()=>{r.reset(),m.splice(0),u.splice(0),i.value=!0}})};return(o,e)=>{const s=V("QuillEditor");return p.branchSubMenu?p.display_content==="template"?(c(),d("div",kt,[t("div",Ct,[M(s,{ref_key:"quill_academic_service",ref:n,theme:"snow",contentType:"delta",onReady:e[0]||(e[0]=y=>h()),onTextChange:k},null,512)]),t("div",$t,[x(t("button",{onClick:$,class:"flex items-center mx-1 text-orange-500 bg-white hover:bg-orange-100 focus:ring-4 focus:ring-orange-300 rounded-lg border border-orange-200 text-sm font-medium px-5 py-2 hover:text-orange-900 focus:z-10"},e[1]||(e[1]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),v(" แก้ไข ",-1)]),512),[[w,i.value]]),t("div",St,[x(t("button",{onClick:C,class:"flex items-center mx-1 text-emerald-500 bg-white hover:bg-emerald-100 focus:ring-4 focus:ring-emerald-300 rounded-lg border border-emerald-200 text-sm font-medium px-5 py-2 hover:text-emerald-900 focus:z-10"},e[2]||(e[2]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1),v(" บันทึก ",-1)]),512),[[w,!i.value]]),x(t("button",{onClick:S,class:"flex items-center mx-1 text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:ring-gray-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2 hover:text-gray-900 focus:z-10"},e[3]||(e[3]=[t("svg",{class:"h-5 w-5 text-red-500",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{stroke:"none",d:"M0 0h24v24H0z"}),v(),t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),v(),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1),v(" ยกเลิก ",-1)]),512),[[w,!i.value]])])])])):(c(),d("div",qt,[t("div",Mt,[t("div",Bt,[t("div",{class:"ql-editor",innerHTML:p.branchSubMenu.detail_html},null,8,Tt)])])])):(c(),d("div",yt,[M(N)]))}}};export{Nt as _,Dt as a,It as b,Ht as c,Qt as d,Vt as e,Ot as f,Ft as g};
