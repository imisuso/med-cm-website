import{o as a,h,d as o,r as y,c as n,a as t,g as p,e as m,u as i,i as u,t as s,F as v,f as B,_ as C,n as M}from"./app-BeH-cH3z.js";import{T as x}from"./ToggleSwitch-BGsZa61X.js";import{d as f}from"./th-COtql551.js";import{b as j}from"./buddhistEra-aKya1j0r.js";import{_ as H}from"./Paginations-CSIau3um.js";import{r as $}from"./ReplyIcon-s6eSTE2i.js";function _(e,d){return a(),h("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 13l4 4L19 7"})])}function g(e,d){return a(),h("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])}function b(e,d){return a(),h("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})])}const D={class:"overflow-x-scroll"},O={class:"w-full border-collapse border border-slate-400"},L={class:"divide-y divide-gray-100"},z={class:"bg-gradient-to-r from-sky-50"},T={class:"w-1/12 p-3 text-sm font-semibold tracking-wide text-left whitespace-nowrap"},N={key:0,class:"w-2/12 p-3 text-sm font-semibold tracking-wide text-left whitespace-nowrap justify-center"},P={key:1,class:"w-2/12 p-3 text-sm font-semibold tracking-wide text-left whitespace-nowrap justify-center"},U={class:"w-2/12 p-3 text-sm font-semibold tracking-wide text-left whitespace-nowrap justify-center"},E={class:"w-2/12 p-3 text-sm font-semibold tracking-wide text-left whitespace-nowrap"},F={key:2,class:"w-1/12 p-3 text-sm font-semibold tracking-wide text-left whitespace-nowrap"},I={key:3,class:"w-1/12 p-3 text-sm font-semibold tracking-wide text-left whitespace-nowrap"},S={class:"w-1/12 p-3 text-sm font-semibold tracking-wide text-left whitespace-nowrap"},A={class:"w-1/12 p-3 text-sm font-semibold tracking-wide text-left whitespace-nowrap"},G={key:4,class:"w-1/12 p-3 text-sm font-semibold tracking-wide text-left whitespace-nowrap"},q={key:5,class:"w-1/12 p-3 text-sm font-semibold tracking-wide text-left whitespace-nowrap"},J={class:"w-1/12 p-3 text-sm font-semibold tracking-wide text-left whitespace-nowrap"},K={class:"w-1/12 p-3 text-sm font-semibold tracking-wide text-left whitespace-nowrap"},Q={class:"w-1/12 p-3 text-sm font-semibold tracking-wide text-left whitespace-nowrap"},R={key:0,class:"w-2/12 p-3 text-sm font-semibold tracking-wide text-left whitespace-nowrap justify-center"},W={key:1,class:"w-2/12 p-3 text-sm font-semibold tracking-wide text-left whitespace-nowrap justify-center"},X={class:"w-2/12 p-3 text-sm font-semibold tracking-wide text-left whitespace-nowrap justify-center"},Y={class:"w-2/12 p-3 text-sm font-semibold tracking-wide text-left whitespace-nowrap"},Z={key:2,class:"w-1/12 p-3 text-sm font-semibold tracking-wide text-left whitespace-nowrap"},V={key:3,class:"w-1/12 p-3 text-sm font-semibold tracking-wide text-left whitespace-nowrap"},tt={class:"w-1/12 p-3 text-sm font-semibold tracking-wide text-left whitespace-nowrap"},et={class:"w-1/12 p-3 text-sm font-semibold tracking-wide text-left whitespace-nowrap"},st={key:4,class:"w-1/12 p-3 text-sm font-semibold tracking-wide text-left whitespace-nowrap"},rt={key:5,class:"w-1/12 p-3 text-sm font-semibold tracking-wide text-left whitespace-nowrap"},at={class:"w-1/12 p-3 text-sm font-semibold tracking-wide text-left whitespace-nowrap"},ot={class:"w-1/12 p-3 text-sm font-semibold tracking-wide text-left whitespace-nowrap"},nt={__name:"PersonVersionInteractiveTable",props:{personCurrent:{type:Object,default:{}},personHistory:{type:Object,default:{}}},setup(e){f.extend(j),y(base_url);const d=l=>l.type==="a"||l.type==="b"||l.type==="z"&&l.group===1,c=l=>!!l;return(l,w)=>(a(),n("div",null,[t("div",D,[t("table",O,[w[2]||(w[2]=t("thead",{class:"bg-gray-50 border-b-2 border-gray-200"},[t("tr",null,[t("th",{class:"w-1/12 p-3 text-sm font-semibold tracking-wide text-left whitespace-nowrap"},"#"),t("th",{class:"w-2/12 p-3 text-sm font-semibold tracking-wide text-left whitespace-nowrap justify-center"},"คำนำหน้า/ตำแหน่ง"),t("th",{class:"w-2/12 p-3 text-sm font-semibold tracking-wide text-left whitespace-nowrap justify-center"},"ชื่อ-สกุล"),t("th",{class:"w-2/12 p-3 text-sm font-semibold tracking-wide text-left whitespace-nowrap"},"สาขา/หน่วย"),t("th",{class:"w-1/12 p-3 text-sm font-semibold tracking-wide text-left whitespace-nowrap"},"หัวหน้าหน่วย"),t("th",{class:"w-1/12 p-3 text-sm font-semibold tracking-wide text-left whitespace-nowrap"},"ลำดับ"),t("th",{class:"w-1/12 p-3 text-sm font-semibold tracking-wide text-left whitespace-nowrap"},"การแสดงผล"),t("th",{class:"w-1/12 p-3 text-sm font-semibold tracking-wide text-left whitespace-nowrap"},"ผู้ดำเนินการ"),t("th",{class:"w-1/12 p-3 text-sm font-semibold tracking-wide text-left whitespace-nowrap"},"วันที่อัพเดท"),t("th",{class:"w-1/12 p-3 text-sm font-semibold tracking-wide text-left whitespace-nowrap"},"วันที่เกิดข้อมูล/เวอร์ชั่น")])],-1)),t("tbody",L,[t("tr",z,[t("td",T,[w[1]||(w[1]=p(" ข้อมูลปัจจุบัน ")),o(i(u),{href:l.route("admin.person.view",{Person:e.personCurrent.id,fromHistoryPage:!0}),class:"flex items-center text-sm hover:bg-gray-100 text-green-700 px-4 py-1 tracking-wide"},{default:m(()=>[o(i(g),{class:"w-10 h-10 px-2 text-blue-700 cursor-pointer"})]),_:1},8,["href"])]),d(e.personCurrent)?(a(),n("td",N,s(e.personCurrent.rname_short_th),1)):(a(),n("td",P,s(e.personCurrent.title_th),1)),t("td",U,s(e.personCurrent.fname_th)+" "+s(e.personCurrent.lname_th),1),t("td",E,s(e.personCurrent.division.name_th),1),c(e.personCurrent.profiles.leader)?(a(),n("td",F,[o(i(_),{class:"h-6 w-6 text-green-700"})])):(a(),n("td",I,[o(i(b),{class:"h-6 w-6 text-red-700"})])),t("td",S,s(e.personCurrent.display_order),1),t("td",A,[o(x,{status:e.personCurrent.status,"onUpdate:status":w[0]||(w[0]=r=>e.personCurrent.status=r)},null,8,["status"])]),e.personCurrent.user_last_act_full_name?(a(),n("td",G,s(e.personCurrent.user_last_act_full_name),1)):(a(),n("td",q,s(e.personCurrent.user_last_act),1)),t("td",J,s(i(f)(e.personCurrent.updated_at).locale("th").format("D MMMM BBBB HH:mm:ss")),1),t("td",K,s(i(f)(e.personCurrent.created_at).locale("th").format("D MMMM BBBB HH:mm:ss")),1)]),(a(!0),n(v,null,B(e.personHistory,r=>(a(),n("tr",{key:r.id,class:"bg-gradient-to-r from-red-50"},[t("td",Q,[p(" LOG-ID : "+s(r.trace_log_id)+" ",1),o(i(u),{href:l.route("admin.person.view_version",r.id),class:"flex items-center text-sm hover:bg-gray-100 text-green-700 px-4 py-1 tracking-wide"},{default:m(()=>[o(i(g),{class:"w-10 h-10 px-2 text-blue-700 cursor-pointer"})]),_:2},1032,["href"])]),d(r)?(a(),n("td",R,s(r.rname_short_th),1)):(a(),n("td",W,s(r.title_th),1)),t("td",X,s(r.fname_th)+" "+s(r.lname_th),1),t("td",Y,s(r.division.name_th),1),c(r.profiles.leader)?(a(),n("td",Z,[o(i(_),{class:"h-6 w-6 text-green-700"})])):(a(),n("td",V,[o(i(b),{class:"h-6 w-6 text-red-700"})])),t("td",tt,s(r.display_order),1),t("td",et,[o(x,{status:r.status,"onUpdate:status":k=>r.status=k},null,8,["status","onUpdate:status"])]),r.user_last_act_full_name?(a(),n("td",st,s(r.user_last_act_full_name),1)):(a(),n("td",rt,s(r.user_last_act),1)),t("td",at,s(i(f)(r.record_updated).locale("th").format("D MMMM BBBB HH:mm:ss")),1),t("td",ot,s(i(f)(r.created_at).locale("th").format("D MMMM BBBB HH:mm:ss")),1)]))),128))])])])]))}},it={class:"flex flex-col px-2 py-1 w-full"},lt={class:"flex flex-row justify-between px-2 py-2 space-y-2 mt-2 mb-2 w-full border rounded-md shadow-md items-baseline"},dt={class:"flex items-center px-3 py-1 text-sm font-bold text-gray-100 transition-colors duration-200 transform bg-green-900 rounded cursor-pointer hover:bg-green-800"},ct={class:"flex flex-col"},wt={class:"flex flex-col w-full mb-4"},ft={class:"flex justify-center md:justify-end mt-2 px-4"},pt={layout:C},bt=Object.assign(pt,{__name:"BackupHistory",props:{person:{type:Object,default:{}},person_versions:{type:Object,default:{}}},setup(e){return(d,c)=>(a(),n("div",it,[t("div",lt,[c[1]||(c[1]=t("div",{class:"text-2xl font-bold"},"ประวัติการแก้ไขข้อมูล",-1)),o(i(u),{href:d.route("admin.person"),method:"get",as:"button",type:"button",class:"px-3 py-1 text-sm font-bold text-gray-100 transition-colors duration-200 transform bg-green-900 rounded cursor-pointer hover:bg-green-800"},{default:m(()=>[t("button",dt,[o(i($),{class:M(["h-6 w-6 mr-2"])}),c[0]||(c[0]=p(" กลับหน้าบุคคลากร "))])]),_:1},8,["href"])]),t("div",ct,[t("div",wt,[o(nt,{personDetails:e.person,personCurrent:e.person,personHistory:e.person_versions.data},null,8,["personDetails","personCurrent","personHistory"])])]),t("div",ft,[o(H,{pagination:e.person_versions},null,8,["pagination"])])]))}});export{bt as default};
