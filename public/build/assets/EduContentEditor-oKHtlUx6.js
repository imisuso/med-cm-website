import{r as k,k as C,u as j,c as l,o as i,a as e,d as _,t as x,g as d,e as F,f as B,b as h,l as z,F as v,h as g,s as M}from"./app-BD845MLQ.js";import{t as V}from"./style-BF2SVBSa.js";const E={class:"flex flex-col p-4 w-full"},H={class:"flex flex-col sm:flex-row sm:justify-between px-2 py-2 space-y-2 mb-2 w-full border rounded-md shadow-md items-baseline"},L={class:"flex items-center text-2xl font-bold space-x-2"},S={class:"flex"},N={key:0,class:"col-span-6"},$={class:"my-1"},D={class:"flex items-center flex-col sm:flex-row justify-between border border-indigo-500 rounded-md"},I={class:"flex flex-col"},A={class:"p-2"},O={class:"flex items-center m-2 sm:m-0"},P=["onClick"],R={class:"flex justify-center"},T=["src"],U={class:"col-span-6"},q={class:"my-1"},G={class:"flex items-center flex-col sm:flex-row justify-between border border-indigo-500 rounded-md"},J={class:"flex flex-col"},K={class:"p-2"},Q={class:"flex items-center m-2 sm:m-0"},W=["id","onChange"],X=["onClick"],Y={key:0,class:"flex justify-center"},Z=["src"],se={__name:"EduContentEditor",props:{sub_header:{type:Object,required:!0}},setup(f){const a=f;k(base_url);const n=C([]),c=j({id:a.sub_header.id,old_attachments:a.sub_header?.attach_files??[]}),b=()=>{n.push({name:"กรุณาเลือกไฟล์",size:0}),M(()=>{var s="file-"+(n.length-1);document.getElementById(s).click()})},u=(s,t)=>{s.splice(t,1)},w=(s,t,r)=>{let o=r.target.files[0];t.File=o,t.name=o.name,t.size=o.size,t.embedSrc=URL.createObjectURL(o),t.size>1024*1024*5&&(u(n,s),m("warning","เพิ่มไฟล์แนบไม่ได้","ไฟล์ของคุณใหญ่เกินไป (> 5MB)")),o.type.match("application/pdf")||(u(n,s),m("warning","เพิ่มไฟล์แนบไม่ได้","อนุญาตให้แนบไฟล์เฉพาะ PDF เท่านั้น"))},m=(s,t,r)=>{V({title:t,description:r},{showIcon:!0,transition:"zoom",position:"top-right",type:s,timeout:3e3})},y=()=>{c.transform(s=>({...s,division_id:a.sub_header.division_id,atFiles:n.map(t=>t.File)})).post(route("admin.update_edu_branch_content",c.id),{preserveState:!1,onSuccess:()=>{m("success","จัดเก็บสำเร็จ",`จัดเก็บไฟล์ PDF ${a.sub_header.sub_header_name_th} เรียบร้อย`)},onError:s=>{m("danger",s.msg,s.sysmsg)},onFinish:()=>{}})};return(s,t)=>(i(),l("div",E,[e("div",H,[e("div",L,[e("div",null,"งานการเรียนการสอน ("+x(f.sub_header.sub_header_name_th)+")",1),e("button",{onClick:b,class:"flex add items-center text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-3 py-2 text-center"},t[0]||(t[0]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),d(" เพิ่มไฟล์แนบ ",-1)]))]),e("div",S,[e("button",{onClick:y,class:"flex items-center mx-1 text-emerald-500 bg-white hover:bg-emerald-100 focus:ring-4 focus:ring-emerald-300 rounded-lg border border-emerald-200 text-sm font-medium px-5 py-2 hover:text-emerald-900 focus:z-10"},t[1]||(t[1]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1),d(" บันทึก ",-1)])),F(h(z),{href:s.route("admin.show_branch_main_menu",a.sub_header.division_id),method:"post",as:"button",type:"button","preserve-scroll":""},{default:B(()=>t[2]||(t[2]=[e("button",{class:"flex items-center mx-1 text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:ring-gray-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2 hover:text-gray-900 focus:z-10"},[e("svg",{class:"h-5 w-5 text-red-500",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{stroke:"none",d:"M0 0h24v24H0z"}),d(),e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),d(),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]),d(" ยกเลิก ")],-1)])),_:1,__:[2]},8,["href"])])]),h(c).old_attachments?(i(),l("div",N,[e("ul",null,[(i(!0),l(v,null,g(h(c).old_attachments,(r,o)=>(i(),l("li",{key:o},[e("div",$,[e("div",D,[e("div",I,[e("div",A,[t[3]||(t[3]=e("strong",null,"ชื่อไฟล์ : ",-1)),d(x(r.orig_name),1)])]),e("div",O,[e("a",{href:"#",onClick:p=>u(h(c).old_attachments,o),class:"flex items-center text-sm text-red-600 px-2 py-2"},t[4]||(t[4]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 hover:fill-current",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,P)])]),e("div",R,[e("embed",{src:`${f.sub_header.json_array_field_transform[o].url}`,width:"800px",height:"800px"},null,8,T)])])]))),128))])])):_("",!0),e("div",U,[e("ul",null,[(i(!0),l(v,null,g(n,(r,o)=>(i(),l("li",{key:o},[e("div",q,[e("div",G,[e("div",J,[e("div",K,[t[5]||(t[5]=e("strong",null,"ชื่อไฟล์ : ",-1)),d(x(r.name),1)])]),e("div",Q,[e("label",null,[t[6]||(t[6]=e("span",{class:"p-2 mt-2 text-sm cursor-pointer rounded-lg shadow-lg border text-white border-indigo-500 bg-blue-700 hover:bg-blue-800 hover:text-white"},"เลือกไฟล์",-1)),e("input",{id:"file-"+o,type:"file",accept:".pdf",onChange:p=>w(o,r,p),style:{display:"none"}},null,40,W)]),e("a",{href:"#",onClick:p=>u(n,o),class:"flex items-center text-sm text-red-600 px-2 py-2"},t[7]||(t[7]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 hover:fill-current",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,X)])]),n[o].name!=="กรุณาเลือกไฟล์"?(i(),l("div",Y,[e("embed",{src:r.embedSrc,width:"800px",height:"800px"},null,8,Z)])):_("",!0)])]))),128))])])]))}};export{se as default};
